
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Word clouds &#8212; The Skywalker Saga</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Word clouds" href="Page_NLP.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">The Skywalker Saga</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Welcome to the Universie of the Star Wars trilogies movies
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Page_Data_vis.html">
   The Star Wars data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Page_Network.html">
   The Star Wars network
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Page_NLP.html">
   Word clouds
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Word clouds
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/Page_Script.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/MiaMiya/Star_Wars_Trilogies"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/MiaMiya/Star_Wars_Trilogies/issues/new?title=Issue%20on%20page%20%2FPage_Script.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/MiaMiya/Star_Wars_Trilogies/master?urlpath=tree/docs/Page_Script.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Word clouds
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#word-clouds-for-anakin-darth-vader-based-on-movies-scripts">
     Word clouds for Anakin/Darth Vader based on movies scripts
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#word-clouds-for-the-two-trilogies-based-on-movies-scripts">
     Word clouds for the two trilogies based on movies scripts
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sentiment-analysis">
   Sentiment analysis
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#part-3-5-1-analysis-of-wikipage">
     Part 3.5.1: Analysis of Wikipage
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#analysis-of-movie-scipts">
     Analysis of Movie Scipts
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#loading-the-scripts">
       Loading the scripts
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#initial-overview">
         Initial overview
        </a>
       </li>
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#character-based-analysis">
         Character based analysis
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#part-3-6-hidden-topic-modeling">
     Part 3.6: Hidden topic modeling
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#part-3-6-1-movie-scipts">
       Part 3.6.1: Movie Scipts
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">import</span> <span class="n">figure</span>
<span class="kn">import</span> <span class="nn">urllib.request</span> <span class="k">as</span> <span class="nn">urllib2</span>
<span class="c1">#from urllib.request import urlopen</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">urllib.parse</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">from</span> <span class="nn">fa2</span> <span class="kn">import</span> <span class="n">ForceAtlas2</span>
<span class="kn">import</span> <span class="nn">collections</span>
<span class="kn">import</span> <span class="nn">powerlaw</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">nltk</span> <span class="kn">import</span> <span class="n">FreqDist</span>
<span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">stopwords</span>
<span class="kn">from</span> <span class="nn">nltk</span> <span class="kn">import</span> <span class="n">word_tokenize</span>
<span class="kn">import</span> <span class="nn">nltk</span>
<span class="c1">#from nltk.stem import WordNetLemmatizer</span>
<span class="kn">import</span> <span class="nn">collections</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Markdown</span> <span class="k">as</span> <span class="n">md</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="c1">#from scipy.interpolate import interp1d</span>
<span class="c1">#from pathlib import Path</span>
<span class="kn">from</span> <span class="nn">wordcloud</span> <span class="kn">import</span> <span class="n">WordCloud</span>
<span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">PlaintextCorpusReader</span> <span class="k">as</span> <span class="n">pcr</span>
<span class="c1">#from nltk.corpus import PlaintextCorpusReader</span>
<span class="c1">#from nltk.tokenize import WordPunctTokenizer</span>
<span class="c1">#import string</span>
<span class="kn">import</span> <span class="nn">community</span>
<span class="kn">from</span> <span class="nn">importlib</span> <span class="kn">import</span> <span class="n">reload</span> 
<span class="n">reload</span><span class="p">(</span><span class="n">community</span><span class="p">)</span>
<span class="c1">#from math import isnan</span>
<span class="c1">#import random</span>
<span class="kn">from</span> <span class="nn">fa2</span> <span class="kn">import</span> <span class="n">ForceAtlas2</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_notebook</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Range1d</span><span class="p">,</span> <span class="n">Circle</span><span class="p">,</span> <span class="n">MultiLine</span><span class="p">,</span> <span class="n">NodesAndLinkedEdges</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">from_networkx</span>
<span class="c1">#from bokeh.palettes import Blues8</span>
<span class="kn">import</span> <span class="nn">bokeh.plotting.figure</span> <span class="k">as</span> <span class="nn">bokeh_figure</span>

<span class="kn">import</span> <span class="nn">gensim</span>
<span class="kn">import</span> <span class="nn">gensim.corpora</span> <span class="k">as</span> <span class="nn">corpora</span>
<span class="kn">from</span> <span class="nn">gensim.models</span> <span class="kn">import</span> <span class="n">CoherenceModel</span>
<span class="kn">from</span> <span class="nn">gensim.test.utils</span> <span class="kn">import</span> <span class="n">common_corpus</span>
<span class="kn">import</span> <span class="nn">pyLDAvis</span>
<span class="kn">import</span> <span class="nn">pyLDAvis.gensim_models</span>
<span class="kn">import</span> <span class="nn">warnings</span>


<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="c1">#from IPython.core.display import display, HTML</span>
<span class="kn">import</span> <span class="nn">requests</span>


<span class="kn">from</span> <span class="nn">vaderSentiment.vaderSentiment</span> <span class="kn">import</span> <span class="n">SentimentIntensityAnalyzer</span>
<span class="o">%</span><span class="k">matplotlib</span> inline 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">corpus_root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;/data/characters/&#39;</span>
<span class="n">file_list</span> <span class="o">=</span> <span class="n">characters_dropna</span><span class="p">[</span><span class="s1">&#39;File_Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.txt&#39;</span>
<span class="n">corpus</span> <span class="o">=</span> <span class="n">pcr</span><span class="p">(</span><span class="n">corpus_root</span><span class="p">,</span> <span class="n">file_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">~</span>\<span class="n">AppData</span>\<span class="n">Local</span>\<span class="n">Temp</span><span class="o">/</span><span class="n">ipykernel_1296</span><span class="o">/</span><span class="mf">1500867459.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="n">corpus_root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;/data/characters/&#39;</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">file_list</span> <span class="o">=</span> <span class="n">characters_dropna</span><span class="p">[</span><span class="s1">&#39;File_Name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.txt&#39;</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">corpus</span> <span class="o">=</span> <span class="n">pcr</span><span class="p">(</span><span class="n">corpus_root</span><span class="p">,</span> <span class="n">file_list</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;characters_dropna&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_wordclouds</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="c1">#The if statement filter the object between a corpus and a dictionary</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="n">tc_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">document</span><span class="p">:{</span><span class="n">term</span><span class="p">:</span><span class="n">term_count</span> <span class="k">for</span> <span class="n">term</span><span class="p">,</span><span class="n">term_count</span> <span class="ow">in</span> <span class="n">FreqDist</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">document</span><span class="p">])</span><span class="o">.</span><span class="n">most_common</span><span class="p">()}</span> <span class="k">for</span> <span class="n">document</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">tc_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">document</span><span class="p">:{</span><span class="n">term</span><span class="p">:</span><span class="n">term_count</span> <span class="k">for</span> <span class="n">term</span><span class="p">,</span><span class="n">term_count</span> <span class="ow">in</span> <span class="n">FreqDist</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="n">document</span><span class="p">))</span><span class="o">.</span><span class="n">most_common</span><span class="p">()}</span> <span class="k">for</span> <span class="n">document</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">fileids</span><span class="p">()}</span>
    
    <span class="c1">#Dictionary with IDF values for each unique word</span>
    <span class="n">idf_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">([</span><span class="n">term</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tc_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">tc_dict</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()]):</span>
        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">tc_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="c1">#Total number of words inside document</span>
        <span class="n">nt</span> <span class="o">=</span> <span class="mi">0</span> 
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">tc_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">tc_dict</span><span class="p">[</span><span class="n">d</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">nt</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># nt describes in how many documents the term appears</span>
        <span class="n">idf_dict</span><span class="p">[</span><span class="n">term</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">N</span><span class="o">/</span><span class="n">nt</span><span class="p">),</span><span class="mi">4</span><span class="p">)</span> <span class="c1">#Calculate Inverse Term Frequency</span>
    
    <span class="c1">#Dictionary with TC-IDF values for each word for each document</span>
    <span class="n">tc_idf_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">document</span><span class="p">:{</span><span class="n">term</span><span class="p">:</span><span class="n">tc_dict</span><span class="p">[</span><span class="n">document</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">term</span><span class="p">)</span><span class="o">*</span><span class="n">idf_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">term</span><span class="p">)</span> <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">tc_dict</span><span class="p">[</span><span class="n">document</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>\
         <span class="k">for</span> <span class="n">document</span> <span class="ow">in</span> <span class="n">tc_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>
    
    <span class="c1">#Dictionary with TC-IDF values of the top 200 words for each docoment</span>
    <span class="n">most_common_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">document</span><span class="p">:{</span><span class="n">word</span><span class="p">:</span><span class="n">value</span> <span class="k">for</span> <span class="n">word</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">tc_idf_dict</span><span class="p">[</span><span class="n">document</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>\
         <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)[:</span><span class="mi">200</span><span class="p">]}</span> <span class="k">for</span> <span class="n">document</span> <span class="ow">in</span> <span class="n">tc_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>
    

    <span class="c1">#Create wordclouds</span>
    <span class="n">col_word</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Reds&#39;</span><span class="p">,</span> <span class="s1">&#39;Purples&#39;</span><span class="p">,</span> <span class="s1">&#39;BuGn&#39;</span><span class="p">,</span> <span class="s1">&#39;Blues&#39;</span><span class="p">,</span> <span class="s1">&#39;Greens&#39;</span><span class="p">]</span> <span class="c1">#Colormap</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;/data/Stormtrooper.jpg&#39;</span><span class="p">))</span> <span class="c1">#Create shape image for wordclouds</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1">#Plotting the word cloud</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">[</span><span class="mi">16</span><span class="p">,</span> <span class="mi">24</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">most_common_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">a</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">wordcloud</span> <span class="o">=</span> <span class="n">WordCloud</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">collocations</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="n">col_word</span><span class="p">[</span><span class="n">a</span><span class="p">],</span>\
             <span class="n">max_font_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span> <span class="n">relative_scaling</span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">,</span> <span class="n">max_words</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> 
        <span class="n">width</span> <span class="o">=</span> <span class="mi">3000</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="mi">3000</span><span class="p">)</span><span class="o">.</span><span class="n">generate_from_frequencies</span><span class="p">(</span><span class="n">most_common_dict</span><span class="p">[</span><span class="n">attribute</span><span class="p">])</span>
        
        <span class="n">a</span><span class="o">+=</span><span class="mi">1</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">wordcloud</span><span class="p">,</span><span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;bilinear&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
        <span class="n">attribute_clean</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">attribute</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.txt&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">attribute_clean</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">wordcloud</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;bilinear&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="word-clouds">
<h1>Word clouds<a class="headerlink" href="#word-clouds" title="Permalink to this headline">¶</a></h1>
<div class="section" id="word-clouds-for-anakin-darth-vader-based-on-movies-scripts">
<h2>Word clouds for Anakin/Darth Vader based on movies scripts<a class="headerlink" href="#word-clouds-for-anakin-darth-vader-based-on-movies-scripts" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">first_trilogy_script</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="c1">#Read txt file that contains the dialogue</span>

    <span class="c1">#Filtering</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">\n</span><span class="se">\\</span><span class="s1">\n&#39;</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">text</span><span class="p">)</span> <span class="c1">#some scripts have \ for every new line</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">\n&#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="n">text</span><span class="p">)</span> <span class="c1"># same as above</span>
    <span class="n">sw</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?=.*:).*(?=\n\n)&#39;</span><span class="p">,</span><span class="n">text</span><span class="p">)</span> <span class="c1"># a dialogue pattern is name: dialogue</span>
    <span class="n">sw</span> <span class="o">=</span> <span class="p">[</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\s+&#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="n">elem</span><span class="p">)</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">sw</span><span class="p">]</span> <span class="c1">#substituting multiple whitespace with one</span>

    <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;(.*)(?=:)&#39;</span><span class="p">,</span><span class="n">elem</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">sw</span><span class="p">]</span> <span class="c1"># find all the names pattern is name: </span>
    <span class="n">names</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="c1"># only getting unique names</span>
    
    <span class="c1"># Create df with names and their dialogues</span>
    <span class="n">sw_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">names</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">],</span> <span class="n">index</span> <span class="o">=</span> <span class="n">names</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">sw_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;(?&lt;=&#39;</span> <span class="o">+</span> <span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="sa">r</span><span class="s1">&#39;:).*(?=\n\n)&#39;</span> <span class="c1">#finding character specific dialogue</span>
        <span class="n">row</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span><span class="n">text</span><span class="p">))</span> <span class="c1">#adding it as a single string</span>

    <span class="n">sw_df</span><span class="p">[</span><span class="s1">&#39;clean_text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sw_df</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">clean_text</span><span class="p">)</span> <span class="c1">#adding a cleaned version </span>
    
    <span class="k">return</span> <span class="n">sw_df</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sw1_df</span> <span class="o">=</span> <span class="n">first_trilogy_script</span><span class="p">(</span><span class="s1">&#39;data/script/Star Wars Episode I - The Phantom Menace.txt&#39;</span><span class="p">)</span>
<span class="n">sw2_df</span> <span class="o">=</span> <span class="n">first_trilogy_script</span><span class="p">(</span><span class="s1">&#39;data/script/Star Wars- Episode II - Attack of the Clones.txt&#39;</span><span class="p">)</span>
<span class="n">sw3_df</span> <span class="o">=</span> <span class="n">first_trilogy_script</span><span class="p">(</span><span class="s1">&#39;data/script/Star Wars- Episode III - Revenge of the Sith.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create function that filters the dialogues</span>
<span class="k">def</span> <span class="nf">create_df_SW_OR</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="n">dia</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># the path to find the scripts</span>
    <span class="n">list_char_IV</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">list_diag_IV</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">dia</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span> <span class="c1"># we itterate through one dialogue/line at a time.</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> 
        <span class="n">text_split</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span> <span class="c1"># splitting by &quot; to get character and dialogue the format is &quot;character&quot; &quot;dialogue&quot;</span>

        <span class="c1"># Add to list the character</span>
        <span class="n">list_char_IV</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">text_split</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="c1"># 1st element is name</span>

        <span class="c1"># Add to daiglog of the character</span>
        <span class="n">list_diag_IV</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">text_split</span><span class="p">[</span><span class="mi">3</span><span class="p">:]))</span> <span class="c1"># 3rd element and onwrads is dialogue</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Character&#39;</span><span class="p">:</span> <span class="n">list_char_IV</span><span class="p">,</span> <span class="s1">&#39;Dialogue&#39;</span><span class="p">:</span> <span class="n">list_diag_IV</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">df</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">star_wars_IV_df</span> <span class="o">=</span> <span class="n">create_df_SW_OR</span><span class="p">(</span><span class="s1">&#39;data/script/SW_EpisodeIV.txt&#39;</span><span class="p">)</span>
<span class="n">star_wars_V_df</span> <span class="o">=</span> <span class="n">create_df_SW_OR</span><span class="p">(</span><span class="s1">&#39;data/script/SW_EpisodeV.txt&#39;</span><span class="p">)</span>
<span class="n">star_wars_VI_df</span> <span class="o">=</span> <span class="n">create_df_SW_OR</span><span class="p">(</span><span class="s1">&#39;data/script/SW_EpisodeVI.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create dataframe for each character </span>
<span class="k">def</span> <span class="nf">aug_df_SW</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">name_unqiue</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Character&#39;</span><span class="p">])</span> <span class="c1">#finding the unique names in our dialogue dataframe</span>
    <span class="n">list_name</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">list_dia</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">name_unqiue</span><span class="p">:</span> 
        <span class="n">list_name</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">list_dia</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clean_text</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Character&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">][</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)))</span> <span class="c1"># taking every row equal to the given name</span>
        
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Character&#39;</span><span class="p">:</span> <span class="n">list_name</span><span class="p">,</span> <span class="s1">&#39;Dialogue&#39;</span><span class="p">:</span> <span class="n">list_dia</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">star_wars_IV_df1</span> <span class="o">=</span> <span class="n">aug_df_SW</span><span class="p">(</span><span class="n">star_wars_IV_df</span><span class="p">)</span>
<span class="n">star_wars_V_df1</span> <span class="o">=</span> <span class="n">aug_df_SW</span><span class="p">(</span><span class="n">star_wars_V_df</span><span class="p">)</span>
<span class="n">star_wars_VI_df1</span> <span class="o">=</span> <span class="n">aug_df_SW</span><span class="p">(</span><span class="n">star_wars_VI_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">anakin_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">((</span><span class="s1">&#39;Star Wars Episode 1&#39;</span><span class="p">,</span> <span class="s1">&#39;Star Wars Episode 2&#39;</span><span class="p">,</span> <span class="s1">&#39;Star Wars Episode 3&#39;</span><span class="p">),</span>
                   <span class="p">(</span><span class="n">sw1_df</span><span class="p">[</span><span class="s2">&quot;clean_text&quot;</span><span class="p">][</span><span class="s1">&#39;ANAKIN&#39;</span><span class="p">],</span> 
                    <span class="n">sw2_df</span><span class="p">[</span><span class="s2">&quot;clean_text&quot;</span><span class="p">][</span><span class="s1">&#39;ANAKIN&#39;</span><span class="p">],</span> 
                    <span class="n">sw3_df</span><span class="p">[</span><span class="s2">&quot;clean_text&quot;</span><span class="p">][</span><span class="s1">&#39;ANAKIN&#39;</span><span class="p">])))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">create_wordclouds</span><span class="p">(</span><span class="n">anakin_dict</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/Page_Script_12_0.png" src="_images/Page_Script_12_0.png" />
</div>
</div>
<p>We see on Anakin’s word cloud from the second movie, words that describe his love for Padme such as ‘alive’ and ‘nervous’. The word ‘mom’ which show us how much he misses his mother in the second movie. Also in the third movie we can see more political words such as the ‘senate’, ‘jedi council’, ‘war’, and ‘Chancellor’ (referring to Chancellor Palpatine).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vader_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">((</span><span class="s1">&#39;Episode 4&#39;</span><span class="p">,</span><span class="s1">&#39;Episode 5&#39;</span><span class="p">,</span><span class="s1">&#39;Episode 6&#39;</span><span class="p">),</span>
                   <span class="p">([</span><span class="n">word</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span> <span class="n">star_wars_IV_df1</span><span class="p">[</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">][</span><span class="n">star_wars_IV_df1</span><span class="p">[</span><span class="s1">&#39;Character&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;VADER&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">sublist</span><span class="p">],</span> 
                    <span class="p">[</span><span class="n">word</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span> <span class="n">star_wars_V_df1</span><span class="p">[</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">][</span><span class="n">star_wars_V_df1</span><span class="p">[</span><span class="s1">&#39;Character&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;VADER&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">sublist</span><span class="p">],</span> 
                    <span class="p">[</span><span class="n">word</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span> <span class="n">star_wars_VI_df1</span><span class="p">[</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">][</span><span class="n">star_wars_VI_df1</span><span class="p">[</span><span class="s1">&#39;Character&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;VADER&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">sublist</span><span class="p">])))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">create_wordclouds</span><span class="p">(</span><span class="n">vader_dict</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/Page_Script_15_0.png" src="_images/Page_Script_15_0.png" />
</div>
</div>
<p>For the sixth movie we can see important words for the movie plot such as ‘emperor’, ‘lightsaber’, ‘dark side’, and ‘sister’. Also on the fifth movie we observe that the word ‘join’ appears (from the famous sentence “join the dark side”) and the most valuable word for the trilogy ‘father’.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#We create a list of words from Anakin&#39;s dialogue from the prequel trilogy</span>
<span class="n">anakin_dialogue</span> <span class="o">=</span> <span class="n">sw1_df</span><span class="p">[</span><span class="s1">&#39;clean_text&#39;</span><span class="p">][</span><span class="s1">&#39;ANAKIN&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">sw2_df</span><span class="p">[</span><span class="s1">&#39;clean_text&#39;</span><span class="p">][</span><span class="s1">&#39;ANAKIN&#39;</span><span class="p">]</span><span class="o">+</span> <span class="n">sw3_df</span><span class="p">[</span><span class="s1">&#39;clean_text&#39;</span><span class="p">][</span><span class="s1">&#39;ANAKIN&#39;</span><span class="p">]</span>

<span class="c1">#We create a list of words from Anakin&#39;s dialogue from the original trilogy</span>
<span class="n">vader_dialogue</span> <span class="o">=</span> <span class="n">star_wars_IV_df1</span><span class="p">[</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">][</span><span class="n">star_wars_IV_df1</span><span class="p">[</span><span class="s1">&#39;Character&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;VADER&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>\
     <span class="o">+</span> <span class="n">star_wars_V_df1</span><span class="p">[</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">][</span><span class="n">star_wars_V_df1</span><span class="p">[</span><span class="s1">&#39;Character&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;VADER&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>\
         <span class="o">+</span> <span class="n">star_wars_VI_df1</span><span class="p">[</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">][</span><span class="n">star_wars_VI_df1</span><span class="p">[</span><span class="s1">&#39;Character&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;VADER&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1">#Above we create a dictionary of both lists from above as values</span>
<span class="n">anakin_vader_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Anakin Skywalker&#39;</span><span class="p">:</span><span class="n">anakin_dialogue</span><span class="p">,</span> <span class="s1">&#39;Darth Vader&#39;</span><span class="p">:</span><span class="n">vader_dialogue</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">create_wordclouds</span><span class="p">(</span><span class="n">anakin_vader_dict</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/Page_Script_18_0.png" src="_images/Page_Script_18_0.png" />
</div>
</div>
<p>By comparing Anakin to Darth Vader we can see a lot of descriptive words for example ‘Padme’ and ‘right’ which stem from Anakin trying to question if what he does is right. Then words such as ‘sorry’ and ‘mother’ create a more emotional thus human aspect to the character, but for Darth Vader’s word cloud there are words such as ‘emperor’, ‘destiny’, ‘rebels fighter’, and ‘rebellion’. His descriptive words have changed a lot after his transformation to the dark side. Also the word ‘Luke’ appears on Darth Vader’s wordcloud which is his son (spoiler alert).</p>
</div>
<div class="section" id="word-clouds-for-the-two-trilogies-based-on-movies-scripts">
<h2>Word clouds for the two trilogies based on movies scripts<a class="headerlink" href="#word-clouds-for-the-two-trilogies-based-on-movies-scripts" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#We create a list with all the dialogues from Prequel Trilogy</span>
<span class="n">original_dialogue</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sw1_df</span><span class="p">[</span><span class="s1">&#39;clean_text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">]))</span>\
    <span class="o">+</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sw2_df</span><span class="p">[</span><span class="s1">&#39;clean_text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">]))</span>\
        <span class="o">+</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sw3_df</span><span class="p">[</span><span class="s1">&#39;clean_text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">]))</span>

<span class="c1">#We create a list with all the dialogues from Original Trilogy</span>
<span class="n">prequel_dialogue</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">star_wars_IV_df1</span><span class="p">[</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">]))</span>\
     <span class="o">+</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">star_wars_V_df1</span><span class="p">[</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">]))</span>\
         <span class="o">+</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">star_wars_VI_df1</span><span class="p">[</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">]))</span>

<span class="c1">#Dictionary with the lists above as values</span>
<span class="n">original_prequel_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Original Trilogy&#39;</span><span class="p">:</span><span class="n">original_dialogue</span><span class="p">,</span> <span class="s1">&#39;Prequel Trilogy&#39;</span><span class="p">:</span><span class="n">prequel_dialogue</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">create_wordclouds</span><span class="p">(</span><span class="n">original_prequel_dict</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/Page_Script_22_0.png" src="_images/Page_Script_22_0.png" />
</div>
</div>
<p>We observe for the first wordcloud some descriptive words (of the trilogy plot) such as ‘Chancellor’, ‘Padme’, and the battle of ‘Geonosis’.
For the Prequel Trilogy we observe words related to ‘Han solo’ and Princess ‘Leia’ such as ‘princess’, ‘solo’ ,’millennium’ ,’Calrissian’ (Known friend/allie of Han solo), ‘Chewie’ (his companion) and ‘Jabba the Hut’.</p>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="sentiment-analysis">
<h1>Sentiment analysis<a class="headerlink" href="#sentiment-analysis" title="Permalink to this headline">¶</a></h1>
<div class="section" id="part-3-5-1-analysis-of-wikipage">
<h2>Part 3.5.1: Analysis of Wikipage<a class="headerlink" href="#part-3-5-1-analysis-of-wikipage" title="Permalink to this headline">¶</a></h2>
<p><a id='S_wiki.'></a></p>
<p>Wikipages are normally written in a neutral way. The sentiment analysis is thus not suited for wikipages but for the fun of it, let’s try and see what will get out of it.</p>
<p>For sentiment analysis we will be using LabMT and VADER. Thus, we need to get these two methods ready. First, we load the txt file for the LabMT methods and initialize VADER.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the LabMT data and convert to dictionary</span>
<span class="n">LabMT_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/labMT.txt&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">word_list_LabMT</span> <span class="o">=</span> <span class="n">LabMT_df</span><span class="p">[</span><span class="s1">&#39;word&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">LabMT_dict</span> <span class="o">=</span> <span class="n">LabMT_df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;word&#39;</span><span class="p">)[</span><span class="s1">&#39;happiness_average&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

<span class="c1"># VADER form the vaderSentiment library</span>
<span class="n">analyzer</span> <span class="o">=</span> <span class="n">SentimentIntensityAnalyzer</span><span class="p">()</span>

<span class="c1">## Load the wiki page for each character and save in a dictionary </span>
<span class="n">wiki</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define function for compute LabMT sentiment for a text</span>
<span class="k">def</span> <span class="nf">compute_avg_sentiment_LabMT</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="c1"># Join all sentences to one string</span>

    <span class="c1"># Clean text </span>
    <span class="n">words_final</span> <span class="o">=</span> <span class="n">clean_text</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    
    <span class="c1"># Initialization to store values</span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Using freqDist to only loop over unique words </span>
    <span class="n">fdist</span> <span class="o">=</span> <span class="n">FreqDist</span><span class="p">(</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words_final</span><span class="p">)</span>
    <span class="n">word_unique</span> <span class="o">=</span> <span class="p">[</span><span class="n">word</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">fdist</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
    <span class="n">word_fre</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fdist</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>

    <span class="c1"># Loop over words </span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fdist</span><span class="p">)):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">word_unique</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">word_fre</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

        <span class="c1"># Get the LabMT score</span>
        <span class="n">S_v</span> <span class="o">=</span> <span class="n">LabMT_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="c1"># Weight the socre by the frequency</span>
        <span class="k">if</span> <span class="n">S_v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">f</span> <span class="o">*</span> <span class="n">LabMT_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">f</span>
            
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="k">return</span> <span class="n">s</span><span class="o">/</span><span class="n">n</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define function for compute sentiment for a text</span>
<span class="k">def</span> <span class="nf">compute_avg_sentiment_VADER</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    
    <span class="c1"># Convert the text file to the right format, where each line is a  new element</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="p">[</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>

    <span class="c1"># Initialzation </span>
    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">len_VADER</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Compute polarity for each sentence in text </span>
    <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">sentence</span><span class="p">:</span>
            <span class="n">vs</span> <span class="o">=</span> <span class="n">analyzer</span><span class="o">.</span><span class="n">polarity_scores</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="n">vs</span><span class="p">[</span><span class="s1">&#39;compound&#39;</span><span class="p">]</span>
            <span class="n">len_VADER</span> <span class="o">+=</span> <span class="mi">1</span>
            
    <span class="c1"># Retur the average polarity</span>
    <span class="k">return</span> <span class="n">s</span><span class="o">/</span><span class="n">len_VADER</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="analysis-of-movie-scipts">
<h2>Analysis of Movie Scipts<a class="headerlink" href="#analysis-of-movie-scipts" title="Permalink to this headline">¶</a></h2>
<p><a id='S_script.'></a></p>
<div class="section" id="loading-the-scripts">
<h3>Loading the scripts<a class="headerlink" href="#loading-the-scripts" title="Permalink to this headline">¶</a></h3>
<p>The wikipages are written in a neutral way, thus we found that it may be more interesting to take a look at the movie scripts. We wish to examen if we can find time in movies, where characters are more happy or sad. We start with load the scripts. As mentioned earlier the scripts for the original trilogy and the prequal trilogy are different, thus we need to define two different functions to create a dataframe for all dialogues appearing in chronological order. First, we will define the fucntion <code class="docutils literal notranslate"><span class="pre">create_df_SW_OR</span></code> which create the dataframe based on the txt file from <a class="reference external" href="https://github.com/kamran786/Star-Wars-Movie-Scripts-Text-Analysis">github</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define function to load script of the original trilogy </span>
<span class="k">def</span> <span class="nf">create_df_SW_OR</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>

    <span class="c1"># Load txt file</span>
    <span class="n">dia</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Initilaize list for the character and dialouge </span>
    <span class="n">list_char_IV</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">list_diag_IV</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Loop over all rows in data </span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">dia</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">text_split</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>

        <span class="c1"># Add character speaking to list</span>
        <span class="n">list_char_IV</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">text_split</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="c1"># Add daiglog to list</span>
        <span class="n">list_diag_IV</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">text_split</span><span class="p">[</span><span class="mi">3</span><span class="p">:]))</span>

    <span class="c1"># Create dataframe </span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Character&#39;</span><span class="p">:</span> <span class="n">list_char_IV</span><span class="p">,</span> <span class="s1">&#39;Dialogue&#39;</span><span class="p">:</span> <span class="n">list_diag_IV</span><span class="p">})</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Sentiment_LabMT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">compute_avg_sentiment_LabMT</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Sentiment_VADER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">compute_avg_sentiment_VADER</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">df</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_df_SW_PREQUAL</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>

    <span class="c1"># Open file </span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    
    <span class="c1"># remove newlines </span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">\n</span><span class="se">\\</span><span class="s1">\n&#39;</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">text</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">\n&#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="n">text</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\(.*\)&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>

    <span class="c1"># Finding the correct format for the dialogues</span>
    <span class="n">sw1</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?=.*:).*(?=\n\n)&#39;</span><span class="p">,</span><span class="n">text</span><span class="p">)</span>
    <span class="n">sw1</span> <span class="o">=</span> <span class="p">[</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\s+&#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="n">elem</span><span class="p">)</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">sw1</span><span class="p">]</span>

    <span class="c1"># Loop through all dialogues and add the speaking character and dialogue</span>
    <span class="n">list_char</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">list_dia</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">sw1</span><span class="p">:</span>
        <span class="n">split_text</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
        <span class="n">list_char</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">split_text</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">list_dia</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">split_text</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
    
    <span class="c1"># Create dataframe and compute sentiment </span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Character&#39;</span> <span class="p">:</span> <span class="n">list_char</span><span class="p">,</span> <span class="s1">&#39;Dialogue&#39;</span> <span class="p">:</span> <span class="n">list_dia</span><span class="p">})</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Sentiment_LabMT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">compute_avg_sentiment_LabMT</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Sentiment_VADER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">compute_avg_sentiment_VADER</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">df</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the script for the original trilogy</span>
<span class="n">star_wars_IV_df</span> <span class="o">=</span> <span class="n">create_df_SW_OR</span><span class="p">(</span><span class="s1">&#39;data/script/SW_EpisodeIV.txt&#39;</span><span class="p">)</span>
<span class="n">star_wars_V_df</span> <span class="o">=</span> <span class="n">create_df_SW_OR</span><span class="p">(</span><span class="s1">&#39;data/script/SW_EpisodeV.txt&#39;</span><span class="p">)</span>
<span class="n">star_wars_VI_df</span> <span class="o">=</span> <span class="n">create_df_SW_OR</span><span class="p">(</span><span class="s1">&#39;data/script/SW_EpisodeVI.txt&#39;</span><span class="p">)</span>

<span class="c1"># Load the scripts for the prequals </span>
<span class="n">star_wars_I_df</span> <span class="o">=</span> <span class="n">create_df_SW_PREQUAL</span><span class="p">(</span><span class="s1">&#39;data/script/Star Wars Episode I - The Phantom Menace.txt&#39;</span><span class="p">)</span>
<span class="n">star_wars_II_df</span> <span class="o">=</span> <span class="n">create_df_SW_PREQUAL</span><span class="p">(</span><span class="s1">&#39;data/script/Star Wars- Episode II - Attack of the Clones.txt&#39;</span><span class="p">)</span>
<span class="n">star_wars_III_df</span> <span class="o">=</span> <span class="n">create_df_SW_PREQUAL</span><span class="p">(</span><span class="s1">&#39;data/script/Star Wars- Episode III - Revenge of the Sith.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">star_wars_V_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Character</th>
      <th>Dialogue</th>
      <th>Sentiment_LabMT</th>
      <th>Sentiment_VADER</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>LUKE</td>
      <td>Echo Three to Echo Seven. Han, old buddy, do y...</td>
      <td>6.103333</td>
      <td>0.0000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>HAN</td>
      <td>Loud and clear, kid. What's up?</td>
      <td>5.320000</td>
      <td>0.3818</td>
    </tr>
    <tr>
      <th>2</th>
      <td>LUKE</td>
      <td>Well, I finished my circle. I don't pick up an...</td>
      <td>6.456667</td>
      <td>0.2732</td>
    </tr>
    <tr>
      <th>3</th>
      <td>HAN</td>
      <td>There isn't enough life on this ice cube to fi...</td>
      <td>5.732500</td>
      <td>0.0000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>LUKE</td>
      <td>Right. I'll see you shortly. There's a meteori...</td>
      <td>5.602500</td>
      <td>0.0772</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create dataframe for all movies </span>
<span class="n">SW_script_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">star_wars_I_df</span><span class="p">,</span> <span class="n">star_wars_II_df</span><span class="p">,</span> <span class="n">star_wars_III_df</span><span class="p">,</span> <span class="n">star_wars_IV_df</span><span class="p">,</span> <span class="n">star_wars_V_df</span><span class="p">,</span> <span class="n">star_wars_VI_df</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="c1">## Saving index for where the movies shift for later plot</span>
<span class="n">index_II</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">star_wars_I_df</span><span class="p">)</span>
<span class="n">index_III</span> <span class="o">=</span> <span class="n">index_II</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">star_wars_II_df</span><span class="p">)</span> 
<span class="n">index_IV</span> <span class="o">=</span> <span class="n">index_III</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">star_wars_III_df</span><span class="p">)</span> 
<span class="n">index_V</span> <span class="o">=</span> <span class="n">index_IV</span> <span class="o">+</span>  <span class="nb">len</span><span class="p">(</span><span class="n">star_wars_VI_df</span><span class="p">)</span> 
<span class="n">index_VI</span> <span class="o">=</span> <span class="n">index_V</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">star_wars_V_df</span><span class="p">)</span> 
<span class="n">index_All</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">index_II</span><span class="p">,</span> <span class="n">index_III</span><span class="p">,</span> <span class="n">index_IV</span><span class="p">,</span> <span class="n">index_V</span><span class="p">,</span> <span class="n">index_VI</span><span class="p">]</span>
<span class="n">movies_index</span> <span class="o">=</span><span class="p">[</span><span class="s1">&#39;SW_I&#39;</span><span class="p">,</span> <span class="s1">&#39;SW_II&#39;</span><span class="p">,</span> <span class="s1">&#39;SW_III&#39;</span><span class="p">,</span> <span class="s1">&#39;SW_IV&#39;</span><span class="p">,</span> <span class="s1">&#39;SW_V&#39;</span><span class="p">,</span> <span class="s1">&#39;SW_VI&#39;</span><span class="p">]</span>
<span class="n">color_movie</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;hotpink&#39;</span><span class="p">,</span> <span class="s1">&#39;darkorchid&#39;</span><span class="p">,</span> <span class="s1">&#39;indigo&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="s1">&#39;darkgreen&#39;</span><span class="p">,</span> <span class="s1">&#39;olive&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="initial-overview">
<h4>Initial overview<a class="headerlink" href="#initial-overview" title="Permalink to this headline">¶</a></h4>
<p>Now we have all the data ready. We will start by creating some simple plots to get an initial overview over the sentiment scores for the dialogues throughout the all the movies.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot sentiment as timeseries</span>
<span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">25</span><span class="p">,</span><span class="mi">9</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">SW_script_df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">SW_script_df</span><span class="p">[</span><span class="s1">&#39;Sentiment_LabMT&#39;</span><span class="p">],</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Sentiment LabMT&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;steelblue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Sentiment score&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of dialogue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Timeseries of sentiments using LabMT&#39;</span><span class="p">)</span>
<span class="c1"># Add the movie indications </span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">index_All</span><span class="p">,</span> <span class="n">movies_index</span><span class="p">,</span> <span class="n">color_movie</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Movie: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">j</span><span class="p">),</span> <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="p">(</span><span class="mf">0.95</span><span class="p">,</span><span class="mf">0.77</span><span class="p">))</span>


<span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">SW_script_df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">SW_script_df</span><span class="p">[</span><span class="s1">&#39;Sentiment_VADER&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;darkred&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Sentiment VADER&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Sentiment score&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of dialogue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Timeseries of sentiments using VADER&#39;</span><span class="p">)</span>
<span class="c1"># Add the movie indications </span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">index_All</span><span class="p">,</span> <span class="n">movies_index</span><span class="p">,</span> <span class="n">color_movie</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Movie: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">j</span><span class="p">),</span> <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="p">(</span><span class="mf">0.95</span><span class="p">,</span><span class="mf">0.77</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/Page_Script_38_0.png" src="_images/Page_Script_38_0.png" />
</div>
</div>
<p>We have plotted the sentiment scores as a time series based on when the dialogue appears in all the movies. This plot is created in the chronological order meaning the prequal movies comes before the original movies. Form the plot we see that the sentiment varies a lot. We cannot see any clear indications of large period of time where characters are happy or sad.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot distirubtion of sentiment </span>
<span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">18</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">SW_script_df</span><span class="p">[</span><span class="s1">&#39;Sentiment_LabMT&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">rwidth</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;steelblue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Histogram for sentiments using LabMT&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Sentiment score&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">SW_script_df</span><span class="p">[</span><span class="s1">&#39;Sentiment_VADER&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">rwidth</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;darkred&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Histogram for sentiments using VADER&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Sentiment score&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/Page_Script_40_0.png" src="_images/Page_Script_40_0.png" />
</div>
</div>
<p>Above we have the distribution plot for the sentiment using the two methods. We see that for both methods we have score across the whole range, but for both methods majority of the dialogues are categorized as neutral.</p>
</div>
<div class="section" id="character-based-analysis">
<h4>Character based analysis<a class="headerlink" href="#character-based-analysis" title="Permalink to this headline">¶</a></h4>
<p>We will take a look at the average sentiment for characters with the highes amount of dialogues.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">SW_script_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Character&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">:</span> <span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;Sentiment_LabMT&#39;</span><span class="p">:</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;Sentiment_VADER&#39;</span><span class="p">:</span><span class="s1">&#39;mean&#39;</span><span class="p">})</span>\
    <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Dialogue</th>
      <th>Sentiment_LabMT</th>
      <th>Sentiment_VADER</th>
    </tr>
    <tr>
      <th>Character</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ANAKIN</th>
      <td>595</td>
      <td>5.512924</td>
      <td>0.043821</td>
    </tr>
    <tr>
      <th>LUKE</th>
      <td>494</td>
      <td>5.522144</td>
      <td>0.056700</td>
    </tr>
    <tr>
      <th>HAN</th>
      <td>459</td>
      <td>5.617464</td>
      <td>0.106785</td>
    </tr>
    <tr>
      <th>OBI-WAN</th>
      <td>406</td>
      <td>5.506546</td>
      <td>0.022793</td>
    </tr>
    <tr>
      <th>THREEPIO</th>
      <td>306</td>
      <td>5.387646</td>
      <td>0.056952</td>
    </tr>
    <tr>
      <th>PADME</th>
      <td>266</td>
      <td>5.582785</td>
      <td>0.051989</td>
    </tr>
    <tr>
      <th>LEIA</th>
      <td>227</td>
      <td>5.485728</td>
      <td>0.045899</td>
    </tr>
    <tr>
      <th>YODA</th>
      <td>148</td>
      <td>5.441334</td>
      <td>0.030941</td>
    </tr>
    <tr>
      <th>QUI-GON</th>
      <td>142</td>
      <td>5.564141</td>
      <td>0.060327</td>
    </tr>
    <tr>
      <th>VADER</th>
      <td>140</td>
      <td>5.483818</td>
      <td>0.033340</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can see the top 10 characters with most dialogues for both methods have an average sentiment of around 5 and 0 respectively to LabMT and VADER, which are categorized as neutral.</p>
<p>To take a detailed look into characters timeseries plot for sentiment, we will start with defining the function for plotting the timeseries based on a given character.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">time_sentiment</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">name_list</span><span class="p">):</span>
    <span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">25</span><span class="p">,</span><span class="mi">9</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Plot for LabMT</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">set_palette</span><span class="p">(</span><span class="s2">&quot;Set1&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">name_list</span><span class="p">:</span>
        <span class="n">df_temp</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Character&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">name</span><span class="p">]</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_temp</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">df_temp</span><span class="p">[</span><span class="s1">&#39;Sentiment_LabMT&#39;</span><span class="p">],</span> <span class="n">label</span> <span class="o">=</span> <span class="n">name</span><span class="p">)</span>
    <span class="c1"># Add the movie indications </span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">index_All</span><span class="p">,</span> <span class="n">movies_index</span><span class="p">,</span> <span class="n">color_movie</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Movie: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">j</span><span class="p">),</span> <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="p">(</span><span class="mf">0.95</span><span class="p">,</span><span class="mf">0.77</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Sentiment score&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of dialogue&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Timeseries of sentiments for&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">name_list</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;using LabMT&#39;</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
    <span class="c1"># Plot for VADER</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">set_palette</span><span class="p">(</span><span class="s2">&quot;Set2&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">name_list</span><span class="p">:</span>
        <span class="n">df_temp</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Character&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">name</span><span class="p">]</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_temp</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">df_temp</span><span class="p">[</span><span class="s1">&#39;Sentiment_VADER&#39;</span><span class="p">],</span> <span class="n">label</span> <span class="o">=</span> <span class="n">name</span><span class="p">)</span>
    <span class="c1"># Add the movie indications </span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">index_All</span><span class="p">,</span> <span class="n">movies_index</span><span class="p">,</span> <span class="n">color_movie</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">i</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Movie: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">j</span><span class="p">),</span> <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="p">(</span><span class="mf">0.95</span><span class="p">,</span><span class="mf">0.77</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Sentiment score&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of dialogue&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Timeseries of sentiments for &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">name_list</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; using VADER&#39;</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>From the word cloud we found that Anakin Skywalker (Darth Vader) had an interesting shift in the type of word occurring based on the movies. We will see if we can see a similar tendency in the sentiment based on the dialogues spoken by him. Additionaly, as previously mentioned he shifts form the light side to the dark side, thus we whish to see if this can be seen in the sentiment.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">time_sentiment</span><span class="p">(</span><span class="n">SW_script_df</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;ANAKIN&#39;</span><span class="p">,</span><span class="s1">&#39;VADER&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/Page_Script_47_0.png" src="_images/Page_Script_47_0.png" />
</div>
</div>
<p>From the plot above we see on the left-hand side, that there is no clear tendency using LabMT. For the VADER plot on the right, we see that in the second movie Anakin in the beginning primarily have a more positive sentiment. From the world clouds in section 4.2 positive words occurs such as ‘alive’ and ‘laughing’. We know form the movies that he is in love at that time.</p>
<p>But from the plot we also see a tendency towards positive in the second half of the third movie. From watching the movie, we know that this is where he is questioning himself and turning to the dark side. This contradicts with the sentiment, since you would imagine someone in question of his existence will not use a lot of words which are positive. This could also mean that the reason for the positive tendency in the second movie could be a coincidence.</p>
<p>We will look at Yoda’s sentiment timeseries plot to see if the sentiment also varies.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">time_sentiment</span><span class="p">(</span><span class="n">SW_script_df</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;YODA&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/Page_Script_49_0.png" src="_images/Page_Script_49_0.png" />
</div>
</div>
<p>From the plot for Yoda, we again see that there are a lot of variation in the tendency which is unexpected, since Yoda is supposed to be a wise character. Additionally, as a jedi you are supposed to be neutral. These traits can not be seen in plot.</p>
<p>From the sentiment analysis we found that the sentiment for the dialogues varies a lot. The sentiment analysis on the Star Wars scripts are not informative. We cannot see any overall tendency for the movies or characters based on the scripts. One of the reasons for this conclusion could be because the scripts are only part of a movie. How an actor acts out the dialogue will largely affect how the viewer perceive the emotions. If a character cries while saying ‘I am happy’ in the sentiment analysis will categorized it as being positive, but in reality, the actor and the screen is trying to express a sad emotion. The movie scripts are only a small part of expressing the emotions of characters, and thus if we wish to analysis the emotions characters are expressing, we need to take more into account than solely the dialogues.</p>
</div>
</div>
</div>
<div class="section" id="part-3-6-hidden-topic-modeling">
<h2>Part 3.6: Hidden topic modeling<a class="headerlink" href="#part-3-6-hidden-topic-modeling" title="Permalink to this headline">¶</a></h2>
<p><a id='htm.'></a></p>
<p>Here we’ll apply hidden topic modeling to two different corpuses and see how the topics are related to the documents.</p>
<p>We’ll use the Latent Dirichlet Allocation (LDA) model which is an unsuperviced machine learning model, thus no previous labelling has to be made, and we only have to provide our corpus.</p>
<div class="section" id="part-3-6-1-movie-scipts">
<h3>Part 3.6.1: Movie Scipts<a class="headerlink" href="#part-3-6-1-movie-scipts" title="Permalink to this headline">¶</a></h3>
<p><a id='htm_script.'></a></p>
<p>For this part we’ll use the txt files generated in ?!?!?!?!?</p>
<p>We examine if the hidden topic modelling can detect 6 different topics (hidden topics = 6) for the 6 different movies.</p>
<p>Thus we initialize by creating a corpus of the scripts for every movie. We reuse the data frames for the scripts defined in previous parts.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">list_of_scripts</span> <span class="o">=</span> <span class="p">[</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sw1_df</span><span class="p">[</span><span class="s1">&#39;clean_text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">])),</span>
<span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sw2_df</span><span class="p">[</span><span class="s1">&#39;clean_text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">])),</span>
<span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sw3_df</span><span class="p">[</span><span class="s1">&#39;clean_text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">])),</span>
<span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">star_wars_IV_df1</span><span class="p">[</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">])),</span>
<span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">star_wars_V_df1</span><span class="p">[</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">])),</span>
<span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">star_wars_VI_df1</span><span class="p">[</span><span class="s1">&#39;Dialogue&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">]))]</span>
</pre></div>
</div>
</div>
</div>
<p>With this we just need to build a dictionary with <code class="docutils literal notranslate"><span class="pre">corpora.Dictionary</span></code> which we can then use to map it to an index acordingly with <code class="docutils literal notranslate"><span class="pre">id2word.doc2bow</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">id2word</span> <span class="o">=</span> <span class="n">corpora</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">(</span><span class="n">list_of_scripts</span><span class="p">)</span> <span class="c1"># creating dictionary</span>

<span class="n">common_corpus</span> <span class="o">=</span> <span class="p">[</span><span class="n">id2word</span><span class="o">.</span><span class="n">doc2bow</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">list_of_scripts</span><span class="p">]</span> <span class="c1"># maping to index</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">gensim</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">LdaModel</span><span class="p">(</span><span class="n">corpus</span> <span class="o">=</span> <span class="n">common_corpus</span><span class="p">,</span> <span class="n">id2word</span> <span class="o">=</span> <span class="n">id2word</span><span class="p">,</span> <span class="n">num_topics</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="n">chunksize</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">random_state</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">#building model</span>
<span class="n">model</span><span class="o">.</span><span class="n">show_topics</span><span class="p">(</span><span class="n">num_topics</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">num_words</span> <span class="o">=</span> <span class="mi">8</span><span class="p">)</span> <span class="c1"># printing out the words for the topics</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(0,
  &#39;0.005*&quot;rebel&quot; + 0.005*&quot;chewie&quot; + 0.004*&quot;look&quot; + 0.004*&quot;imperial&quot; + 0.004*&quot;princess&quot; + 0.004*&quot;uncle&quot; + 0.004*&quot;think&quot; + 0.003*&quot;okay&quot;&#39;),
 (1,
  &#39;0.032*&quot;chewie&quot; + 0.015*&quot;jabba&quot; + 0.014*&quot;solo&quot; + 0.010*&quot;rebel&quot; + 0.008*&quot;princess&quot; + 0.007*&quot;imperial&quot; + 0.006*&quot;destiny&quot; + 0.006*&quot;lando&quot;&#39;),
 (2,
  &#39;0.007*&quot;jedi&quot; + 0.006*&quot;master&quot; + 0.005*&quot;anakin&quot; + 0.005*&quot;know&quot; + 0.004*&quot;must&quot; + 0.004*&quot;chancellor&quot; + 0.003*&quot;artoo&quot; + 0.003*&quot;right&quot;&#39;),
 (3,
  &#39;0.008*&quot;jedi&quot; + 0.007*&quot;back&quot; + 0.007*&quot;luke&quot; + 0.006*&quot;anakin&quot; + 0.006*&quot;think&quot; + 0.006*&quot;master&quot; + 0.006*&quot;time&quot; + 0.006*&quot;take&quot;&#39;),
 (4,
  &#39;0.021*&quot;father&quot; + 0.015*&quot;dark&quot; + 0.008*&quot;might&quot; + 0.007*&quot;done&quot; + 0.007*&quot;sister&quot; + 0.007*&quot;destroy&quot; + 0.006*&quot;commander&quot; + 0.006*&quot;easy&quot;&#39;),
 (5,
  &#39;0.017*&quot;luke&quot; + 0.011*&quot;good&quot; + 0.010*&quot;take&quot; + 0.009*&quot;must&quot; + 0.009*&quot;could&quot; + 0.008*&quot;time&quot; + 0.008*&quot;back&quot; + 0.008*&quot;vader&quot;&#39;)]
</pre></div>
</div>
</div>
</div>
<p>With this topic modelling we see some clear topic-movie correlation. For topic 0 we have ‘princess’ and ‘uncle’ which are specific to the 4th movie. For topic 4 we see ‘father’ and ‘sister’ which is also specific to movie 6. But we there are also problems, looking at topic 3 Luke and Anaking are only mentioned together in the 6th movie, but we already assigned topic 4 to movie 6. Additionaly the words have small weight and are thus not descriptive of the topic.</p>
<p>When mapping the topics with PCA we also see this problem:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="n">temp</span> <span class="o">=</span> <span class="n">pyLDAvis</span><span class="o">.</span><span class="n">gensim_models</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">topic_model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">corpus</span><span class="o">=</span><span class="n">common_corpus</span><span class="p">,</span> <span class="n">dictionary</span><span class="o">=</span><span class="n">id2word</span><span class="p">)</span>
<span class="n">pyLDAvis</span><span class="o">.</span><span class="n">enable_notebook</span><span class="p">()</span>
<span class="n">pyLDAvis</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/bmabey/pyLDAvis@3.3.1/pyLDAvis/js/ldavis.v1.0.0.css">


<div id="ldavis_el973751402263694660643987149258"></div>
<script type="text/javascript">

var ldavis_el973751402263694660643987149258_data = {"mdsDat": {"x": [-0.15883316340661602, 0.1627481398057616, -0.06289559285425496, -0.022968925227167574, 0.08956962868097681, -0.007620086998699996], "y": [0.02421380446981737, 0.01201757678921019, 0.045355011422616144, -0.11744487764994513, 0.02385447238734786, 0.012004012580953485], "topics": [1, 2, 3, 4, 5, 6], "cluster": [1, 1, 1, 1, 1, 1], "Freq": [62.74060578979119, 12.723883041945092, 12.5729662346104, 11.771110271257472, 0.18581569179595786, 0.00561897059988866]}, "tinfo": {"Term": ["jedi", "must", "chewie", "anakin", "master", "think", "know", "father", "take", "ship", "time", "lord", "look", "back", "good", "want", "chancellor", "need", "power", "side", "help", "dark", "force", "right", "council", "general", "jabba", "never", "artoo", "would", "leia", "shuttle", "shield", "emperor", "speak", "told", "complete", "real", "perhaps", "dear", "turn", "shall", "death", "generator", "clearance", "soon", "grab", "star", "quick", "coming", "code", "destroyer", "fully", "training", "energy", "place", "quite", "alliance", "chewbacca", "luke", "skywalker", "strong", "nothing", "vader", "friend", "attack", "leave", "around", "bring", "give", "could", "good", "last", "take", "lord", "young", "system", "must", "power", "help", "side", "force", "move", "time", "find", "would", "ship", "look", "need", "back", "wait", "thing", "think", "something", "want", "make", "father", "unfortunate", "asteroid", "reach", "cargo", "deactivated", "fluent", "destiny", "nice", "strike", "solo", "surprise", "bargain", "firepower", "carbon", "forgotten", "ally", "supposed", "sweetheart", "falcon", "chewie", "price", "among", "following", "interpreter", "party", "passage", "ridge", "screen", "stuck", "terminal", "jabba", "luck", "moon", "forever", "somebody", "operational", "millennium", "princess", "deflector", "rebel", "imperial", "gold", "wedge", "standing", "piece", "lando", "fleet", "alert", "admiral", "ohhh", "pretty", "think", "back", "ship", "sith", "wesa", "upset", "federation", "goen", "dissen", "mesa", "errand", "state", "oops", "queen", "doen", "yous", "binks", "malastare", "race", "engine", "ganna", "distracted", "viceroy", "sword", "boie", "tested", "sebulba", "proven", "arrest", "local", "nosir", "podracing", "seal", "grievous", "lady", "separatist", "council", "assignment", "constitution", "plot", "senate", "right", "planet", "appointment", "know", "master", "palpatine", "like", "jedi", "artoo", "going", "come", "senator", "anakin", "plan", "republic", "kenobi", "padme", "well", "best", "unit", "ever", "alderaan", "enough", "back", "think", "droids", "chancellor", "time", "ship", "lord", "much", "power", "take", "luke", "must", "little", "system", "could", "help", "side", "force", "good", "thing", "need", "want", "make", "concentrate", "sister", "bear", "took", "friendly", "excellency", "boba", "fett", "angry", "using", "guard", "buddy", "audience", "lower", "officer", "scan", "awful", "called", "aggressive", "drink", "palace", "owen", "parent", "twilight", "ground", "surface", "hunter", "pleasure", "bounty", "hurt", "entrance", "crazy", "dark", "geonosis", "difficult", "mistake", "father", "destroy", "might", "done", "fear", "commander", "able", "three", "learned", "talking", "really", "galaxy", "command", "stand", "easy", "fire", "thanks", "patience", "hang", "happened", "clear", "jump", "anakin", "back", "jedi", "master", "good", "look", "tell", "uncle", "biggs", "aboard", "season", "precise", "block", "dantooine", "eisley", "harvest", "play", "thirty", "vaporators", "anchorhead", "bocce", "checked", "commission", "direction", "exhaust", "extra", "jawas", "jettisoned", "large", "malfunctioning", "masher", "ought", "outrun", "passenger", "religion", "restricted", "rich", "rebel", "imperial", "target", "range", "princess", "standing", "garbage", "negative", "tractor", "reward", "gotten", "pick", "okay", "chewie", "look", "money", "blaster", "field", "think", "jabba", "gold", "alderaan", "want", "wedge", "solo", "alert", "deflector", "ship", "check", "back", "trouble", "somebody", "stay", "sorry", "tell", "arena", "race", "building", "quadinaros", "commended", "stairway", "ello", "tarpals", "knocked", "noah", "forbid", "sebulba", "reply", "vergence", "guide", "stinkowiff", "leading", "nosir", "dealer", "wont", "pedunky", "refuel", "scary", "object", "cheated", "autopilot", "mure", "goodnight", "handmaiden", "fried", "bombad", "negotiation", "wesa", "dissen", "hisen", "watto", "comen", "doen", "mesa", "grand", "slave", "annie", "naboo", "room", "temple", "artoo", "master", "yousa", "starship", "know", "queen", "jedi", "hanger", "chancellor", "like", "right", "well", "anakin", "amidala", "palpatine", "going", "council", "republic", "padme", "coruscant", "grievous", "geonosis", "senate", "must", "senator", "late", "thank", "think", "lord", "come", "time", "ship", "need", "want", "take", "back", "side", "good", "power", "never", "help", "force"], "Freq": [69.0, 124.0, 101.0, 68.0, 48.0, 97.0, 43.0, 98.0, 138.0, 110.0, 110.0, 85.0, 94.0, 121.0, 151.0, 74.0, 35.0, 73.0, 87.0, 87.0, 97.0, 56.0, 92.0, 32.0, 31.0, 51.0, 48.0, 59.0, 23.0, 77.0, 64.30387233124577, 21.824656590185977, 70.66482365221209, 62.66183102934199, 14.093684530854704, 44.5908928300851, 15.48765089800553, 15.815244528121159, 15.113415563648067, 16.15813504617382, 30.261193189651983, 15.684833030329383, 34.79652485227649, 17.790860306497613, 10.214719680636223, 29.009839456210546, 13.5182671850849, 49.53148276890156, 12.17101710284586, 51.55106974016244, 23.374442911791753, 18.192540018964664, 9.091394788846513, 21.531203897281955, 15.33340891351483, 26.34821759128611, 30.070653970685097, 18.056346556602385, 15.537969298432722, 188.96357277930025, 47.78093051751581, 38.083985829589615, 45.91425747144736, 87.05771247873916, 78.57304387006509, 46.1443898671292, 43.17214867088368, 39.95286489336928, 33.71315033935782, 40.92351006943887, 97.99244768563796, 126.75136113201089, 37.18664167618774, 114.46532362647231, 72.81928387713381, 31.79426559059164, 56.15658050477912, 102.64315171938003, 73.62745048419781, 81.40397955697459, 73.00381477265472, 75.98884197428221, 51.415803956659744, 88.22871273668758, 51.24024891018921, 62.88275729179956, 84.96410484676717, 73.96536110699014, 60.12340334685045, 87.98260175957671, 56.61147025417502, 59.87042048064151, 69.10737514809333, 51.680463277231006, 56.47012810872043, 51.751689125468125, 52.71224105087085, 6.799391105841161, 10.785158238009615, 6.030809085830153, 5.0214912290712, 5.0214912290712, 5.0214912290712, 14.692063282851104, 6.319748238413473, 7.130261183395062, 32.71454268851303, 5.291353164088168, 5.455244119506025, 5.455244119506025, 4.265998493118849, 4.265998493118849, 4.57218021945605, 4.57218021945605, 4.57218021945605, 8.66347519336321, 73.42562747640237, 6.053582126222668, 3.2435916176532524, 3.2435916176532524, 3.2435916176532524, 3.2435916176532524, 3.2435916176532524, 3.2435916176532524, 3.2435916176532524, 3.2435916176532524, 3.2435916176532524, 34.31512904367913, 8.79044506980115, 13.653083847462474, 7.818059967510652, 11.313902903186046, 10.566503934310346, 5.685565420478465, 19.257512583165248, 9.75014528449961, 21.735681727216967, 16.42085287060793, 12.634894211527048, 8.186388727221223, 10.214674762719449, 6.197005950234179, 14.290633451728496, 12.689632086015287, 5.7681726861058635, 6.864257466635734, 6.668652169421687, 6.44135057434828, 8.22359320215019, 6.495758881637344, 6.388503067595078, 8.394651165879273, 0.7425724184780116, 2.0768975729296644, 0.6570373134456803, 0.39054458700375155, 0.42211036158316156, 1.002187909040718, 0.7282875721699474, 0.5089861520037136, 0.5986449175205577, 1.359288155917785, 0.3455244011653264, 0.34969561902664664, 0.4530195756028151, 0.3913183202872066, 0.3686719300892526, 1.2507519305088735, 0.3853384472057864, 0.6886152805434723, 1.2170225738772147, 0.4801433404207098, 0.3379686450830251, 0.3364156722174909, 0.33497859382776035, 0.3021849802063377, 0.9348325044277778, 1.2015506613574263, 0.29762835421691364, 0.3332651844636235, 0.36986115948972204, 4.002505395885509, 1.8583949265953907, 1.8583949265953907, 10.657230174477494, 1.1986689006417701, 1.1986689006417701, 1.1986689006417701, 8.285534681477253, 10.089525542233112, 5.89386286147797, 1.0337374269289519, 12.200795659914675, 13.16158498715907, 2.514040129756771, 4.280643222854612, 17.048483283588162, 6.36434094348276, 6.605188542940902, 4.85787322730939, 4.915651080977352, 14.357026541295344, 4.061632030511692, 4.912988654490225, 7.1843520448268485, 4.2072308897551, 4.333921381727853, 3.7543886956293915, 3.8955266663731436, 3.257164947978899, 5.118086216823992, 6.670073192699775, 16.063317310129932, 13.500820179252413, 6.42022043514887, 6.58448748216104, 12.670272119979261, 12.405597455350915, 10.357448398640317, 7.700816635303016, 9.895660829092622, 12.535546102880991, 15.364419082457024, 11.48843059903526, 7.839649302356121, 7.943594061326577, 9.802306517809294, 9.078205174719535, 8.574776877338405, 8.67790041119977, 9.932919067630623, 7.646553897794836, 7.496381926441719, 7.331835893632592, 7.043264941794196, 4.218975282470713, 14.063519662836232, 3.149378556611385, 5.772356699029853, 3.546083073287963, 3.7848622123859124, 3.9323383913112715, 3.9323383913112715, 5.0716943071272995, 5.0716943071272995, 6.651958487970599, 5.988871577425435, 3.4674852939051726, 3.4674852939051726, 2.450411710804264, 2.450411710804264, 3.427281433795244, 3.427281433795244, 2.0873149454227535, 2.0873149454227535, 2.0873149454227535, 7.02527271673477, 2.465944601956489, 2.465944601956489, 5.443913193966205, 4.269216667453393, 8.66428522542901, 4.338380317403214, 9.962936555418224, 5.860757322227449, 6.395251287132162, 7.637856067224151, 31.83074239658499, 4.310733612269339, 3.488593087595004, 6.161694538020344, 43.70478499976804, 13.984230850840348, 17.36228989658966, 15.727847285986135, 9.085041850239984, 13.11907471204174, 9.097220717025353, 11.966585494342757, 8.251500883084407, 7.779457118785682, 12.09364712153188, 9.34055551624188, 11.593390569965782, 10.595015126512031, 13.038507428341063, 12.674084076728235, 8.499185628270393, 7.959001875121882, 8.058134001592661, 8.958209012534128, 8.551934860207021, 7.015939480518135, 11.534492497925148, 11.339423442316459, 9.606986270119267, 8.843600210352827, 9.775658125390049, 9.281142913346168, 8.144063600178036, 0.12197135588208884, 0.07820959998771927, 0.05632871816541496, 0.05632871816541496, 0.041741466200625105, 0.03444784021823018, 0.03444784021823018, 0.03444784021823018, 0.03444784021823018, 0.03444784021823018, 0.03444784021823018, 0.03444784021823018, 0.027154212298275485, 0.027154212298275485, 0.027154212298275485, 0.027154212298275485, 0.027154212298275485, 0.027154212298275485, 0.027154212298275485, 0.027154212298275485, 0.027154212298275485, 0.027154212298275485, 0.027154212298275485, 0.027154212298275485, 0.027154212298275485, 0.027154212298275485, 0.027154212298275485, 0.027154212298275485, 0.027154212298275485, 0.027154212298275485, 0.1708242593202347, 0.13885695674275958, 0.06539594373204273, 0.09116000921173803, 0.13032135494983257, 0.08872830195222639, 0.04779717749775919, 0.04779717749775919, 0.04779717749775919, 0.052105190509623305, 0.04050881392769095, 0.04050881392769095, 0.0939299369041459, 0.14982817966592724, 0.14370936592230732, 0.037211362338048934, 0.0447196815679662, 0.05891241148815555, 0.11667651655514619, 0.07333597840384438, 0.056784486474244666, 0.058732458687252305, 0.07513145303784463, 0.047895303274590066, 0.0606590014892389, 0.043563578406299604, 0.04792801315857353, 0.06791848379342291, 0.04652756433471317, 0.0640021329879435, 0.04972018231561158, 0.047960723042556996, 0.05262250346688631, 0.049918216424258796, 0.04881189692324089, 0.0006677583745663914, 0.00032452293846945205, 0.0009740597477815487, 0.0002663495908106064, 0.0002653287338820566, 0.0002898816510534495, 0.00025784911932623964, 0.0002584956395878451, 0.00028620484354093965, 0.00025726086762235464, 0.00022726791118778315, 0.00028464448246006183, 0.00025647578010181614, 0.00025269761049291975, 0.0002280823234073052, 0.00022781375779498618, 0.00022653955421627714, 0.00025505934733872655, 0.0002550650599424246, 0.0002552783597758901, 0.0002265492363471603, 0.0002265155173376398, 0.00022601400932375498, 0.00022527106324126618, 0.00025158025450497764, 0.00025208193829128394, 0.0002508787467708526, 0.00022539958217677132, 0.0002512027539344467, 0.00022465922873749934, 0.00027936536284874774, 0.0004609526875757141, 0.0005348102084031826, 0.0003309272652368677, 0.00027895188752262066, 0.00045040596144669284, 0.0002984028050927437, 0.0002776215539506524, 0.0006877892825365899, 0.0002864179968973872, 0.0002993547299366699, 0.0014165672875828459, 0.0013289229396950123, 0.000863882781639405, 0.0015919789068719343, 0.003466221370868779, 0.006036138854137859, 0.0005520268827238788, 0.0009422516188457611, 0.005237158047042345, 0.0007710591821710613, 0.006870751777789256, 0.0003651228523828052, 0.0037438710191114643, 0.0019279445713888997, 0.0033534167242071297, 0.002211525015495535, 0.0052564381724095974, 0.0006503981527681537, 0.0012117778860389608, 0.002470298814940372, 0.0028875666068333447, 0.0021107078136155645, 0.0018958576673926456, 0.0007060483459074671, 0.0013963345928727888, 0.0009675477311105731, 0.0019736805554578865, 0.004248887684892244, 0.0016136190699515855, 0.001432975408764736, 0.0017967810812117803, 0.0028740082253300957, 0.002509244827549216, 0.0013995842734011033, 0.0026539779486645593, 0.0025884113200042467, 0.0021974372074587897, 0.0021622993629521075, 0.002551866593036042, 0.00222783669620884, 0.0020427321653280674, 0.0022109934796929807, 0.0019643117682114106, 0.0017977961083550176, 0.0018690881135093773, 0.0018109253707866277], "Total": [69.0, 124.0, 101.0, 68.0, 48.0, 97.0, 43.0, 98.0, 138.0, 110.0, 110.0, 85.0, 94.0, 121.0, 151.0, 74.0, 35.0, 73.0, 87.0, 87.0, 97.0, 56.0, 92.0, 32.0, 31.0, 51.0, 48.0, 59.0, 23.0, 77.0, 67.08448431423213, 22.91660071107676, 74.95062496845408, 66.74937968858279, 15.040333710947763, 47.654540894378, 16.604667935096014, 16.97146180382467, 16.329773047907906, 17.511700477851793, 32.88717390115997, 17.056002900116177, 37.850785364988646, 19.382001355765787, 11.172060336387519, 31.741871886636297, 14.80394218323065, 54.36779819102625, 13.371431030689681, 56.65127562094408, 25.68728025416008, 19.99682326950272, 10.003647683432929, 23.726609474346244, 16.936103880820248, 29.12334569523049, 33.24949884834428, 19.972454500810176, 17.188658642815945, 209.06851055434842, 52.90536941921682, 42.16361626071687, 50.987038873439104, 97.39526675069827, 87.81483456133063, 51.53886450567704, 48.43210915030504, 44.82326766632955, 37.649411264337544, 46.273323319459315, 114.9858888368615, 151.72931994127669, 41.94136960542015, 138.61714716978818, 85.89470810353829, 35.58370358139068, 65.26262861646015, 124.09689364946662, 87.59882353564703, 97.83774579857551, 87.48444211833666, 92.42656889168695, 60.03182028539452, 110.28358054886569, 60.14318279422928, 77.06326351910933, 110.82745031114767, 94.00565284510155, 73.3824958327418, 121.94733136334459, 69.14465698163717, 75.42873766401452, 97.72256805289105, 61.261190838405405, 74.31459787066404, 63.59829684097549, 98.4085456803578, 8.628469635259547, 13.826928643646864, 7.837613510963683, 6.566012120895229, 6.566012120895229, 6.566012120895229, 19.256989464083016, 8.30495708077525, 9.41994654618235, 43.31336652688484, 7.038789250419413, 7.358960625846793, 7.358960625846793, 5.7719015417584645, 5.7719015417584645, 6.236373908902745, 6.236373908902745, 6.236373908902745, 11.863558744402807, 101.27421814513485, 8.402793098490378, 4.503554886156591, 4.503554886156591, 4.503554886156591, 4.503554886156591, 4.503554886156591, 4.503554886156591, 4.503554886156591, 4.503554886156591, 4.503554886156591, 48.44951190370117, 12.30705795296149, 19.467715170203608, 11.0346618319662, 16.297086055082968, 15.29585454779343, 8.056257928887838, 28.711935356586824, 14.210044757854316, 33.72034675607007, 25.142988734484472, 19.020638243704862, 12.123003806432088, 16.16776396848622, 8.952478248038737, 34.81530600389502, 29.791400792347275, 8.683281562147839, 16.777088867742407, 15.328176273637979, 17.094085776532463, 97.72256805289105, 121.94733136334459, 110.82745031114767, 18.161993036200354, 1.7827622255959183, 5.095723115535948, 1.6675021367663359, 0.9990595016886031, 1.0818322985245412, 2.5786130581270004, 1.8820859381965307, 1.317638238266002, 1.5530397320408516, 3.550707916101184, 0.902656858437678, 0.9136007835050776, 1.183612184517386, 1.0226196173986932, 0.9674619602828057, 3.2830221070580192, 1.0173801028433997, 1.8212592313285307, 3.222833566142865, 1.2719947887525387, 0.9050244977611275, 0.9026760754701272, 0.9002713880809639, 0.8178493317571048, 2.530082951185108, 3.2613626431080363, 0.8107555319520015, 0.9078670776635122, 1.0087239364968485, 11.013989922531856, 5.15113768881282, 5.15113768881282, 31.39562901779528, 3.3471835231675118, 3.3471835231675118, 3.3471835231675118, 26.037340714315558, 32.491957838849466, 18.444695697573003, 2.896194819182013, 43.30009205959986, 48.669996636824756, 7.8935795289112525, 14.308876311781674, 69.61758525710259, 23.164707583404226, 24.249796246093908, 17.92384783152662, 18.432059186451593, 68.86838655055132, 15.246422168705541, 19.52433349850934, 33.37280934211237, 17.407507684877025, 18.261064016581, 15.473404710865527, 16.32116704142415, 12.789191561232784, 23.990442515318936, 35.056633179809864, 121.94733136334459, 97.72256805289105, 33.816448117992636, 35.85035837860493, 110.28358054886569, 110.82745031114767, 85.89470810353829, 51.830163456099534, 87.59882353564703, 138.61714716978818, 209.06851055434842, 124.09689364946662, 62.50452575570237, 65.26262861646015, 114.9858888368615, 97.83774579857551, 87.48444211833666, 92.42656889168695, 151.72931994127669, 75.42873766401452, 73.3824958327418, 74.31459787066404, 63.59829684097549, 5.175013432645946, 17.607160666038588, 3.946097492062023, 7.261409018926636, 4.49157768523587, 4.80669537403172, 5.003942815403799, 5.003942815403799, 6.461703759598052, 6.461703759598052, 8.509836118467998, 7.831044791563017, 4.582159672250384, 4.582159672250384, 3.2687428931686893, 3.2687428931686893, 4.673928335745922, 4.673928335745922, 2.905794763541581, 2.905794763541581, 2.905794763541581, 9.802136971827577, 3.469004127892379, 3.469004127892379, 7.673707726921493, 6.104065986468302, 12.502707019756711, 6.268131589215138, 14.469119909092253, 8.54130427810048, 9.504192140994794, 11.670949280557801, 56.90419534774689, 6.459523797374483, 5.116432350200472, 9.701663416169827, 98.4085456803578, 26.126092721114432, 35.43932025613294, 32.63815768625138, 16.1495018367642, 26.657340617094217, 16.547066984866664, 24.079041708452127, 14.695017740738342, 13.58813509497983, 25.739757102780462, 17.88466231705144, 24.610856549741573, 21.56399796650205, 30.448496421222803, 30.03300474787257, 15.976946370179665, 14.643031990131394, 15.310663206151732, 20.333554503584676, 19.358370991330457, 12.94765743550968, 68.86838655055132, 121.94733136334459, 69.61758525710259, 48.669996636824756, 151.72931994127669, 94.00565284510155, 67.13426426966619, 9.197298891073162, 5.988781513039359, 4.384522426007707, 4.384522426007707, 3.315016687842923, 2.7802636758593127, 2.7802636758593127, 2.7802636758593127, 2.7802636758593127, 2.7802636758593127, 2.7802636758593127, 2.7802636758593127, 2.2455106648299217, 2.2455106648299217, 2.2455106648299217, 2.2455106648299217, 2.2455106648299217, 2.2455106648299217, 2.2455106648299217, 2.2455106648299217, 2.2455106648299217, 2.2455106648299217, 2.2455106648299217, 2.2455106648299217, 2.2455106648299217, 2.2455106648299217, 2.2455106648299217, 2.2455106648299217, 2.2455106648299217, 2.2455106648299217, 33.72034675607007, 25.142988734484472, 8.20781299592236, 14.802039815016217, 28.711935356586824, 16.16776396848622, 5.861880590227887, 5.861880590227887, 5.861880590227887, 7.212537012238582, 5.32545715318564, 5.32545715318564, 33.2802445258937, 101.27421814513485, 94.00565284510155, 4.580758940865809, 7.513744115606205, 15.982310411270108, 97.72256805289105, 48.44951190370117, 19.020638243704862, 23.990442515318936, 74.31459787066404, 12.123003806432088, 43.31336652688484, 8.683281562147839, 14.210044757854316, 110.82745031114767, 12.962839602717464, 121.94733136334459, 22.04390733898896, 16.297086055082968, 56.91736600920454, 29.212352163173012, 67.13426426966619, 1.909690326212251, 0.9674619602828057, 2.9144102822844937, 0.8014687865501632, 0.7991827565151517, 0.8836654603131204, 0.79612941474291, 0.803874794096021, 0.8920127718261703, 0.8037198900145786, 0.7181292456777737, 0.9002713880809639, 0.8114986016335539, 0.7996038425536481, 0.7220249973901537, 0.7232794262832632, 0.720053948900146, 0.8107555319520015, 0.8118494263148015, 0.812903632440428, 0.721672217931358, 0.7216567867585099, 0.7229666038044616, 0.7213241095981556, 0.8061079664422013, 0.8078409504082554, 0.8047321745356445, 0.7232888256532211, 0.8068535194375742, 0.7223875608187238, 0.8995867372601853, 1.5214902862326076, 1.7827622255959183, 1.0818322985245412, 0.9045257814912867, 1.5378268584886623, 0.9783177680564735, 0.902656858437678, 2.5786130581270004, 0.9422995636387149, 0.9945868683363007, 6.491389440568159, 6.021993784505894, 3.7278144715362385, 8.458282545840648, 23.164707583404226, 48.669996636824756, 2.199649749602002, 4.4062204062350006, 43.30009205959986, 3.550707916101184, 69.61758525710259, 1.3094440919806847, 35.85035837860493, 14.308876311781674, 32.491957838849466, 18.261064016581, 68.86838655055132, 3.0978140806695134, 7.8935795289112525, 24.249796246093908, 31.39562901779528, 19.52433349850934, 17.407507684877025, 3.6489280945933404, 11.013989922531856, 6.459523797374483, 26.037340714315558, 124.09689364946662, 18.432059186451593, 15.120317494570727, 30.826142273751206, 97.72256805289105, 85.89470810353829, 17.92384783152662, 110.28358054886569, 110.82745031114767, 73.3824958327418, 74.31459787066404, 138.61714716978818, 121.94733136334459, 87.48444211833666, 151.72931994127669, 87.59882353564703, 59.90052846451037, 97.83774579857551, 92.42656889168695], "Category": ["Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Default", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic1", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic2", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic3", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic4", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic5", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6", "Topic6"], "logprob": [30.0, 29.0, 28.0, 27.0, 26.0, 25.0, 24.0, 23.0, 22.0, 21.0, 20.0, 19.0, 18.0, 17.0, 16.0, 15.0, 14.0, 13.0, 12.0, 11.0, 10.0, 9.0, 8.0, 7.0, 6.0, 5.0, 4.0, 3.0, 2.0, 1.0, -5.1636, -6.2441, -5.0692, -5.1894, -6.6814, -5.5296, -6.5871, -6.5662, -6.6116, -6.5448, -5.9173, -6.5745, -5.7777, -6.4485, -7.0033, -5.9595, -6.7231, -5.4246, -6.8281, -5.3846, -6.1755, -6.4262, -7.1198, -6.2577, -6.5971, -6.0558, -5.9236, -6.4337, -6.5839, -4.0856, -5.4605, -5.6874, -5.5004, -4.8606, -4.9631, -5.4954, -5.562, -5.6395, -5.8093, -5.6155, -4.7423, -4.4849, -5.7112, -4.5869, -5.0392, -5.8679, -5.299, -4.6959, -5.0282, -4.9278, -5.0367, -4.9966, -5.3872, -4.8472, -5.3907, -5.1859, -4.8849, -5.0236, -5.2308, -4.85, -5.291, -5.235, -5.0915, -5.3821, -5.2935, -5.3807, -5.3623, -5.8148, -5.3535, -5.9348, -6.1179, -6.1179, -6.1179, -5.0443, -5.888, -5.7673, -4.2438, -6.0656, -6.0351, -6.0351, -6.281, -6.281, -6.2117, -6.2117, -6.2117, -5.5725, -3.4354, -5.931, -6.555, -6.555, -6.555, -6.555, -6.555, -6.555, -6.555, -6.555, -6.555, -4.1961, -5.558, -5.1177, -5.6752, -5.3056, -5.374, -5.9937, -4.7737, -5.4544, -4.6527, -4.9331, -5.1952, -5.6292, -5.4078, -5.9076, -5.072, -5.1909, -5.9793, -5.8053, -5.8342, -5.8689, -5.6246, -5.8605, -5.8771, -5.5921, -8.0174, -6.9888, -8.1397, -8.6599, -8.5822, -7.7175, -8.0368, -8.3951, -8.2328, -7.4128, -8.7824, -8.7704, -8.5115, -8.658, -8.7176, -7.496, -8.6733, -8.0928, -7.5233, -8.4534, -8.8045, -8.8091, -8.8134, -8.9164, -7.7871, -7.5361, -8.9316, -8.8185, -8.7143, -6.3328, -7.1, -7.1, -5.3535, -7.5385, -7.5385, -7.5385, -5.6052, -5.4082, -5.9458, -7.6865, -5.2182, -5.1424, -6.7978, -6.2656, -4.8837, -5.869, -5.8319, -6.1391, -6.1273, -5.0555, -6.3181, -6.1278, -5.7478, -6.2829, -6.2532, -6.3968, -6.3599, -6.5389, -6.0869, -5.8221, -4.9432, -5.117, -5.8603, -5.835, -5.1805, -5.2016, -5.382, -5.6784, -5.4276, -5.1911, -4.9877, -5.2784, -5.6605, -5.6474, -5.4371, -5.5138, -5.5709, -5.5589, -5.4239, -5.6855, -5.7053, -5.7275, -5.7676, -6.2142, -5.0102, -6.5066, -5.9007, -6.388, -6.3228, -6.2846, -6.2846, -6.0301, -6.0301, -5.7589, -5.8639, -6.4104, -6.4104, -6.7576, -6.7576, -6.422, -6.422, -6.9179, -6.9179, -6.9179, -5.7043, -6.7512, -6.7512, -5.9593, -6.2024, -5.4946, -6.1863, -5.3549, -5.8855, -5.7983, -5.6207, -4.1934, -6.1927, -6.4043, -5.8355, -3.8764, -5.0159, -4.7995, -4.8984, -5.4472, -5.0797, -5.4458, -5.1717, -5.5434, -5.6023, -5.1611, -5.4195, -5.2034, -5.2934, -5.0859, -5.1143, -5.5138, -5.5795, -5.5671, -5.4612, -5.5077, -5.7056, -5.2085, -5.2255, -5.3913, -5.4741, -5.3739, -5.4258, -5.5565, -5.6091, -6.0535, -6.3817, -6.3817, -6.6814, -6.8735, -6.8735, -6.8735, -6.8735, -6.8735, -6.8735, -6.8735, -7.1114, -7.1114, -7.1114, -7.1114, -7.1114, -7.1114, -7.1114, -7.1114, -7.1114, -7.1114, -7.1114, -7.1114, -7.1114, -7.1114, -7.1114, -7.1114, -7.1114, -7.1114, -5.2723, -5.4795, -6.2325, -5.9003, -5.5429, -5.9273, -6.546, -6.546, -6.546, -6.4597, -6.7114, -6.7114, -5.8704, -5.4034, -5.4451, -6.7963, -6.6125, -6.3369, -5.6535, -6.1179, -6.3737, -6.3399, -6.0937, -6.5439, -6.3077, -6.6387, -6.5432, -6.1946, -6.5729, -6.254, -6.5065, -6.5425, -6.4498, -6.5025, -6.5249, -7.3181, -8.0397, -6.9406, -8.2373, -8.2411, -8.1526, -8.2697, -8.2672, -8.1654, -8.272, -8.3959, -8.1708, -8.275, -8.2899, -8.3924, -8.3935, -8.3992, -8.2806, -8.2806, -8.2797, -8.3991, -8.3993, -8.4015, -8.4048, -8.2943, -8.2923, -8.2971, -8.4042, -8.2958, -8.4075, -8.1896, -7.6888, -7.5402, -8.0202, -8.191, -7.7119, -8.1236, -8.1958, -7.2886, -8.1646, -8.1204, -6.5661, -6.6299, -7.0606, -6.4493, -5.6713, -5.1166, -7.5085, -6.9738, -5.2585, -7.1743, -4.987, -7.9218, -5.5942, -6.2579, -5.7043, -6.1206, -5.2549, -7.3445, -6.7222, -6.01, -5.8539, -6.1673, -6.2746, -7.2624, -6.5805, -6.9473, -6.2344, -5.4677, -6.4358, -6.5546, -6.3283, -5.8586, -5.9943, -6.5781, -5.9383, -5.9633, -6.127, -6.1431, -5.9775, -6.1133, -6.2, -6.1209, -6.2392, -6.3278, -6.2889, -6.3205], "loglift": [30.0, 29.0, 28.0, 27.0, 26.0, 25.0, 24.0, 23.0, 22.0, 21.0, 20.0, 19.0, 18.0, 17.0, 16.0, 15.0, 14.0, 13.0, 12.0, 11.0, 10.0, 9.0, 8.0, 7.0, 6.0, 5.0, 4.0, 3.0, 2.0, 1.0, 0.4238, 0.4173, 0.4073, 0.403, 0.4012, 0.3997, 0.3965, 0.3956, 0.3888, 0.3857, 0.3829, 0.3824, 0.382, 0.3805, 0.3766, 0.3762, 0.3753, 0.373, 0.3721, 0.3718, 0.3718, 0.3716, 0.3705, 0.3691, 0.3667, 0.366, 0.3657, 0.3653, 0.3652, 0.3651, 0.3643, 0.3644, 0.3614, 0.354, 0.355, 0.3556, 0.3512, 0.3511, 0.3557, 0.3433, 0.3062, 0.2863, 0.3458, 0.2747, 0.301, 0.3536, 0.3159, 0.2764, 0.2924, 0.2823, 0.2852, 0.2703, 0.3112, 0.243, 0.306, 0.2628, 0.2004, 0.2264, 0.2669, 0.1397, 0.2662, 0.2352, 0.1197, 0.2961, 0.1916, 0.26, -0.1581, 1.8235, 1.8132, 1.7996, 1.7935, 1.7935, 1.7935, 1.7911, 1.7885, 1.7832, 1.781, 1.7763, 1.7623, 1.7623, 1.7594, 1.7594, 1.7513, 1.7513, 1.7513, 1.7473, 1.7401, 1.7338, 1.7335, 1.7335, 1.7335, 1.7335, 1.7335, 1.7335, 1.7335, 1.7335, 1.7335, 1.7168, 1.7252, 1.7069, 1.7171, 1.6967, 1.6918, 1.7132, 1.6623, 1.685, 1.6225, 1.6357, 1.6526, 1.6691, 1.6025, 1.6938, 1.1712, 1.2083, 1.6526, 1.168, 1.2294, 1.0857, -0.4134, -0.8708, -0.7918, 1.3019, 1.1978, 1.1761, 1.1423, 1.1343, 1.1325, 1.1286, 1.1242, 1.1224, 1.1203, 1.1134, 1.1133, 1.1133, 1.1132, 1.113, 1.1089, 1.1086, 1.1028, 1.101, 1.0998, 1.0994, 1.0886, 1.0866, 1.085, 1.078, 1.078, 1.0751, 1.0715, 1.0715, 1.0703, 1.0614, 1.0541, 1.0541, 0.9932, 1.0467, 1.0467, 1.0467, 0.9286, 0.9041, 0.9328, 1.0434, 0.807, 0.7659, 0.9295, 0.8668, 0.6667, 0.7817, 0.7731, 0.7681, 0.752, 0.5057, 0.7509, 0.6938, 0.5378, 0.6535, 0.6353, 0.6574, 0.641, 0.7059, 0.5287, 0.4143, 0.0466, 0.0942, 0.4121, 0.379, -0.0902, -0.1162, -0.0418, 0.167, -0.107, -0.3295, -0.537, -0.3061, -0.0024, -0.0324, -0.3886, -0.3038, -0.249, -0.292, -0.6526, -0.2153, -0.2076, -0.2425, -0.1269, 1.9353, 1.9148, 1.914, 1.91, 1.9032, 1.9005, 1.8985, 1.8985, 1.8973, 1.8973, 1.8932, 1.8713, 1.8608, 1.8608, 1.8514, 1.8514, 1.8293, 1.8293, 1.8087, 1.8087, 1.8087, 1.8064, 1.7982, 1.7982, 1.7962, 1.782, 1.7728, 1.7715, 1.7664, 1.7629, 1.7433, 1.7155, 1.5586, 1.7351, 1.7566, 1.6856, 1.3279, 1.5145, 1.426, 1.4095, 1.5643, 1.4305, 1.5413, 1.4403, 1.5624, 1.5818, 1.3842, 1.4899, 1.3868, 1.4289, 1.2914, 1.2768, 1.5083, 1.5299, 1.4977, 1.3198, 1.3226, 1.5268, 0.3527, -0.2358, 0.159, 0.4342, -0.6027, -0.1758, 0.0301, 1.9653, 1.9499, 1.9335, 1.9335, 1.9134, 1.8973, 1.8973, 1.8973, 1.8973, 1.8973, 1.8973, 1.8973, 1.873, 1.873, 1.873, 1.873, 1.873, 1.873, 1.873, 1.873, 1.873, 1.873, 1.873, 1.873, 1.873, 1.873, 1.873, 1.873, 1.873, 1.873, 1.0029, 1.0893, 1.4558, 1.1983, 0.8931, 1.083, 1.4789, 1.4789, 1.4789, 1.3579, 1.4094, 1.4094, 0.418, -0.2279, -0.1951, 1.4752, 1.1641, 0.685, -0.4423, -0.2051, 0.4742, 0.2758, -0.6087, 0.7543, -0.2828, 0.9932, 0.5962, -1.1093, 0.6584, -1.2643, 0.1938, 0.4598, -0.698, -0.0838, -0.9383, 1.8283, 1.7867, 1.7831, 1.7774, 1.7764, 1.7644, 1.7516, 1.7445, 1.7422, 1.7399, 1.7285, 1.7276, 1.7272, 1.7271, 1.7267, 1.7238, 1.7226, 1.7226, 1.7212, 1.7208, 1.7204, 1.7203, 1.7163, 1.7152, 1.7146, 1.7144, 1.7135, 1.7131, 1.7121, 1.711, 1.7096, 1.6849, 1.675, 1.6945, 1.7027, 1.651, 1.6916, 1.6999, 1.5575, 1.6882, 1.6783, 1.3568, 1.368, 1.4169, 1.2089, 0.9795, 0.7917, 1.4966, 1.3365, 0.7666, 1.3519, 0.5633, 1.6019, 0.6198, 0.8746, 0.608, 0.7679, 0.3063, 1.3182, 1.0051, 0.595, 0.4928, 0.6544, 0.6618, 1.2365, 0.8137, 0.9805, 0.2994, -0.4954, 0.4434, 0.5227, 0.0367, -0.6474, -0.6541, 0.3291, -0.848, -0.8779, -0.6294, -0.6581, -1.1159, -1.1235, -0.8782, -1.3496, -0.9186, -0.6271, -1.0788, -1.0536]}, "token.table": {"Topic": [1, 3, 4, 1, 2, 3, 1, 2, 4, 4, 1, 2, 3, 1, 2, 3, 1, 3, 1, 2, 1, 3, 1, 2, 1, 2, 3, 4, 2, 1, 4, 1, 3, 4, 1, 3, 1, 3, 4, 1, 3, 1, 3, 1, 3, 4, 1, 3, 1, 2, 1, 2, 3, 4, 1, 4, 2, 4, 1, 2, 3, 4, 1, 2, 4, 1, 3, 1, 2, 3, 4, 1, 2, 3, 1, 2, 3, 4, 2, 1, 2, 4, 1, 3, 4, 1, 2, 4, 1, 3, 4, 2, 4, 1, 2, 1, 2, 1, 3, 4, 1, 2, 3, 2, 1, 3, 4, 1, 2, 3, 4, 1, 3, 4, 1, 1, 3, 4, 1, 3, 4, 1, 3, 1, 2, 3, 4, 1, 3, 4, 2, 1, 3, 4, 1, 3, 1, 3, 4, 1, 2, 3, 4, 1, 3, 4, 1, 2, 4, 1, 2, 3, 1, 3, 4, 1, 2, 1, 3, 1, 3, 1, 2, 3, 4, 1, 2, 4, 1, 3, 4, 1, 3, 1, 4, 2, 1, 3, 1, 3, 4, 4, 1, 2, 3, 4, 1, 3, 4, 1, 2, 3, 1, 3, 4, 1, 3, 1, 3, 1, 2, 3, 1, 2, 4, 1, 3, 1, 3, 4, 4, 2, 2, 1, 2, 4, 1, 2, 3, 4, 1, 3, 4, 1, 3, 4, 1, 2, 3, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 1, 2, 4, 1, 2, 1, 2, 1, 2, 3, 4, 1, 2, 1, 2, 1, 2, 3, 4, 4, 1, 3, 1, 3, 4, 1, 2, 3, 1, 3, 4, 1, 2, 3, 1, 2, 3, 4, 1, 3, 1, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 1, 3, 1, 3, 4, 1, 4, 1, 2, 4, 1, 3, 4, 1, 3, 4, 1, 2, 3, 1, 2, 3, 4, 1, 2, 4, 1, 4, 1, 2, 3, 4, 1, 2, 1, 2, 3, 4, 2, 1, 2, 3, 4, 2, 1, 4, 1, 3, 4, 1, 2, 3, 4, 1, 3, 1, 2, 3, 4, 2, 1, 3, 4, 1, 2, 3, 4, 1, 4, 1, 3, 4, 1, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 1, 2, 3, 4, 1, 2, 3, 4, 1, 4, 1, 2, 4, 1, 2, 3, 4, 1, 2, 3, 4, 2, 2, 1, 2, 3, 4, 1, 3, 1, 3, 4, 1, 2, 1, 4, 1, 2, 3, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 3, 4, 1, 2, 3, 4, 1, 2, 3, 1, 2, 3, 4, 1, 2, 1, 3, 4, 1, 2, 4, 1, 2, 3, 4, 1, 3, 1, 2, 3, 4, 2, 2, 1, 2, 4, 1, 3, 4, 4, 1, 3, 4, 4, 1, 2, 1, 2, 2, 1, 3, 4, 1, 3, 1, 2, 3, 1, 2, 1, 3, 1, 3, 4, 1, 2, 3, 1, 2, 3, 1, 2, 4, 1, 3, 1, 2, 3, 4, 1, 2, 3, 1, 2, 3, 1, 2, 1, 2, 3, 4, 1, 3, 1, 3, 1, 3, 1, 2, 3, 1, 2, 1, 3, 1, 2, 3, 4, 1, 2, 3, 4, 2, 1, 3, 4, 2, 1, 2, 3, 4, 2, 1, 2, 1, 3, 4, 1, 3, 4, 4, 1, 2, 1, 2, 3, 1, 3, 4, 1, 3, 4, 1, 3, 1, 3, 1, 2, 3, 1, 2, 3, 4, 1, 1, 2, 3, 4, 1, 2, 4, 1, 3, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 3, 1, 2, 3, 4, 1, 3, 1, 3, 4, 1, 2, 3, 4, 1, 3, 4, 1, 2, 3, 4, 1, 3, 1, 2, 3, 4, 1, 2, 1, 3, 1, 2, 1, 2, 1, 2, 4, 1, 2, 1, 2, 1, 2, 3, 1, 2, 3, 4, 1, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 3, 4, 1, 2, 1, 2, 3, 4, 1, 2, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 1, 3, 4, 1, 2, 3, 4, 1, 3, 4, 1, 2, 4, 1, 2, 3, 1, 3, 4, 1, 2, 3, 4, 1, 3, 4, 1, 2, 3, 4, 1, 2, 1, 3, 4, 1, 3, 1, 4, 1, 3, 4, 1, 2, 3, 1, 3, 1, 2, 3, 4, 1, 2, 3, 4, 3, 1, 2, 3, 4, 1, 3, 4, 1, 3, 1, 2, 3, 4, 1, 2, 3, 1, 3], "Freq": [0.3626020252101099, 0.060433670868351656, 0.5439030378151649, 0.22807501087650778, 0.45615002175301556, 0.22807501087650778, 0.4172356751032665, 0.4172356751032665, 0.17881528932997134, 0.688279855512714, 0.6252489919859482, 0.12504979839718963, 0.20841633066198273, 0.23032766882953562, 0.6909830064886069, 0.11516383441476781, 0.9012412570157482, 0.05006895872309712, 0.16034959009953662, 0.8017479504976831, 0.6456165373125785, 0.32280826865628925, 0.2220468108591026, 0.6661404325773078, 0.6098589222671976, 0.014520450530171373, 0.20328630742239923, 0.1742454063620565, 0.445332999598887, 0.15475794576850188, 0.7737897288425094, 0.46215067320586223, 0.30810044880390813, 0.30810044880390813, 0.3452806397473065, 0.3452806397473065, 0.5236451095102085, 0.5236451095102085, 0.5236451095102085, 0.8923936625452075, 0.08923936625452074, 0.39524395812065893, 0.39524395812065893, 0.6043676549593032, 0.2590147092682728, 0.1295073546341364, 0.5975172816659174, 0.2987586408329587, 0.1446452825168047, 0.7955490538424259, 0.8925303349462244, 0.01940283336839618, 0.05820850010518854, 0.03880566673679236, 0.21823770263965536, 0.6547131079189661, 0.2139527883540833, 0.6418583650622499, 0.7216230073768666, 0.049201568684786354, 0.13120418315943028, 0.09020287592210832, 0.13588875533423994, 0.6794437766711997, 0.7602447750048764, 0.7108971946087422, 0.25850807076681537, 0.1669788750554186, 0.5009366251662558, 0.1669788750554186, 0.1669788750554186, 0.5323577617837578, 0.2661788808918789, 0.13308944044593946, 0.3596781156704225, 0.3596781156704225, 0.3596781156704225, 0.7993696466088043, 0.445332999598887, 0.13822540780405168, 0.13822540780405168, 0.6911270390202584, 0.9030685702170764, 0.0531216806010045, 0.0531216806010045, 0.12769688165714188, 0.12769688165714188, 0.7661812899428514, 0.3431225884970934, 0.3431225884970934, 0.3431225884970934, 0.2139527883540833, 0.6418583650622499, 0.17325312858599812, 0.6930125143439925, 0.1522994447143447, 0.7614972235717234, 0.6694493747187452, 0.19525606762630068, 0.13946861973307192, 0.6942923214226369, 0.23143077380754562, 0.07714359126918187, 0.445332999598887, 0.9308463407461554, 0.05817789629663471, 0.05817789629663471, 0.21723199055925632, 0.7208152414011687, 0.009874181389057105, 0.03949672555622842, 0.5165723915756365, 0.05165723915756366, 0.4649151524180729, 0.895090045963133, 0.8953847885968826, 0.038929773417255766, 0.038929773417255766, 0.6137075087555629, 0.2789579585252559, 0.11158318341010236, 0.9178963656164436, 0.08825926592465803, 0.4875896934243845, 0.040632474452032045, 0.040632474452032045, 0.4875896934243845, 0.4876705514901833, 0.037513119345398714, 0.4876705514901833, 0.445332999598887, 0.9033604320563166, 0.06022402880375444, 0.7729448535855935, 0.5975172816659174, 0.2987586408329587, 0.2740530846529181, 0.2740530846529181, 0.2740530846529181, 0.8522784925291088, 0.026090157934564553, 0.08696719311521518, 0.03478687724608607, 0.573328216797232, 0.35036724359830845, 0.09555470279953866, 0.17136566631574052, 0.17136566631574052, 0.6854626652629621, 0.3596781156704225, 0.3596781156704225, 0.3596781156704225, 0.40418812460917575, 0.017573396722138077, 0.5623486951084185, 0.1522994447143447, 0.7614972235717234, 0.9136748324490965, 0.05710467702806853, 0.9246835874738394, 0.07925859321204339, 0.2111182653623811, 0.703727551207937, 0.0703727551207937, 0.0703727551207937, 0.20771678810234384, 0.7789379553837894, 0.05192919702558596, 0.42103502109636487, 0.038275911008760446, 0.5358627541226462, 0.9001429755821222, 0.050007943087895676, 0.1954486899373971, 0.5863460698121913, 0.445332999598887, 0.549070655510442, 0.549070655510442, 0.4595847640725952, 0.061277968543012686, 0.4902237483441015, 0.688279855512714, 0.7392852115269407, 0.029571408461077628, 0.17742845076646577, 0.059142816922155256, 0.5254775072849868, 0.03284234420531167, 0.4269504746690518, 0.3596781156704225, 0.3596781156704225, 0.3596781156704225, 0.9438289957738123, 0.029962825262660708, 0.029962825262660708, 0.8856818608078543, 0.05904545738719029, 0.6091948012473908, 0.3045974006236954, 0.7701823464196809, 0.02852527208961781, 0.19967690462732468, 0.10521672806746635, 0.2104334561349327, 0.6313003684047981, 0.5313253660235244, 0.5313253660235244, 0.7037192270449084, 0.23457307568163613, 0.07819102522721205, 0.8321725611342233, 0.445332999598887, 0.445332999598887, 0.16858347845612467, 0.758625653052561, 0.08429173922806234, 0.5385711132461001, 0.010161719117850946, 0.010161719117850946, 0.4471156411854416, 0.3715284880392442, 0.06192141467320737, 0.5572927320588663, 0.5996993814588006, 0.5996993814588006, 0.7993696466088043, 0.5631225879365694, 0.312845882186983, 0.0625691764373966, 0.8479764061454598, 0.01662698835579333, 0.06650795342317332, 0.06650795342317332, 0.5327472270696918, 0.03329670169185574, 0.03329670169185574, 0.43285712199412457, 0.13588875533423994, 0.6794437766711997, 0.4028007975738598, 0.4363675307050147, 0.1678336656557749, 0.1522994447143447, 0.7614972235717234, 0.2220468108591026, 0.6661404325773078, 0.8222743839930166, 0.021638799578763593, 0.09737459810443617, 0.06491639873629078, 0.18124705862813306, 0.7249882345125322, 0.17325312858599812, 0.6930125143439925, 0.8996202110342271, 0.011387597608028191, 0.056937988040140955, 0.034162792824084576, 0.8905556756033141, 0.8996718281977211, 0.09996353646641346, 0.44731065413366566, 0.05591383176670821, 0.5032244859003738, 0.1705937172563803, 0.511781151769141, 0.1705937172563803, 0.8471962050852083, 0.13478121444537405, 0.019254459206482007, 0.9286966639616571, 0.051594259108980946, 0.051594259108980946, 0.15481017353112883, 0.15481017353112883, 0.15481017353112883, 0.6192406941245153, 0.8860396673250887, 0.10805361796647422, 0.5773244384375016, 0.2886622192187508, 0.12371237966517892, 0.2628723566442266, 0.6834681272749891, 0.05257447132884532, 0.05257447132884532, 0.8370168669387855, 0.032953419958219904, 0.06590683991643981, 0.06590683991643981, 0.1877773064800285, 0.5633319194400854, 0.1877773064800285, 0.945694047350352, 0.06754957481073944, 0.5447617114416917, 0.3631744742944612, 0.0907936185736153, 0.26063020265724296, 0.6515755066431074, 0.11751107613339412, 0.11751107613339412, 0.8225775329337588, 0.39188374267087506, 0.06531395711181251, 0.5225116568945001, 0.49179792929155913, 0.04917979292915591, 0.4426181363624032, 0.3596781156704225, 0.3596781156704225, 0.3596781156704225, 0.8279013313201186, 0.020442008180743668, 0.0919890368133465, 0.05110502045185917, 0.07998267882465816, 0.15996535764931633, 0.7198441094219235, 0.23415627577253162, 0.7024688273175949, 0.23863511467794574, 0.6363603058078553, 0.07954503822598191, 0.07954503822598191, 0.2220468108591026, 0.6661404325773078, 0.22704047095177618, 0.7017614556691264, 0.020640042813797835, 0.04128008562759567, 0.445332999598887, 0.6032958460838749, 0.01436418681152083, 0.24419117579585412, 0.1436418681152083, 0.445332999598887, 0.3861702415980839, 0.5406383382373174, 0.7191483268300988, 0.2097515953254455, 0.059929027235841564, 0.5773659780119882, 0.02309463912047953, 0.27713566944575435, 0.11547319560239765, 0.5823956145678971, 0.3882637430452648, 0.4021219861871594, 0.4021219861871594, 0.028722999013368528, 0.17233799408021117, 0.445332999598887, 0.8821838759223168, 0.07152842237207975, 0.023842807457359914, 0.4629532417234955, 0.1322723547781416, 0.1322723547781416, 0.3306808869453539, 0.4083016506585404, 0.5444022008780539, 0.8878407476856534, 0.0619423777455107, 0.04129491849700714, 0.9540208984869882, 0.029813153077718382, 0.014906576538859191, 0.48920682850800273, 0.06988668978685754, 0.27954675914743016, 0.13977337957371508, 0.7519455500502239, 0.04799652447129089, 0.12799073192344235, 0.07999420745215147, 0.3066203024411333, 0.3066203024411333, 0.3066203024411333, 0.7871867037818885, 0.05318829079607355, 0.06382594895528826, 0.09573892343293239, 0.849877735331554, 0.011642160757966492, 0.11642160757966492, 0.023284321515932984, 0.21823770263965536, 0.6547131079189661, 0.1625083758965101, 0.7312876915342955, 0.08125418794825505, 0.9040098841229774, 0.004783121080015754, 0.0717468162002363, 0.019132484320063016, 0.8176319584473075, 0.031447383017204136, 0.11006584056021447, 0.0471710745258062, 0.445332999598887, 0.445332999598887, 0.5342100225321949, 0.02054653932816134, 0.2671050112660974, 0.18491885395345206, 0.3878053734538827, 0.3878053734538827, 0.4796931734902018, 0.028217245499423636, 0.4796931734902018, 0.2482542164928052, 0.7447626494784156, 0.30922532263898994, 0.6184506452779799, 0.21830443664669028, 0.21830443664669028, 0.21830443664669028, 0.20546838522284405, 0.7191393482799542, 0.05136709630571101, 0.05136709630571101, 0.8495494515665732, 0.0166578323836583, 0.0832891619182915, 0.0499734971509749, 0.7138700234148253, 0.038587568833233804, 0.15435027533293522, 0.09646892208308451, 0.829996601614715, 0.016116438866305146, 0.0886404137646783, 0.06446575546522058, 0.4981738785115918, 0.16605795950386393, 0.33211591900772786, 0.8176336784286533, 0.027254455947621777, 0.09539059581667622, 0.05450891189524355, 0.1705937172563803, 0.511781151769141, 0.1705937172563803, 0.8180228331212691, 0.03338868706617425, 0.10016606119852275, 0.0667773741323485, 0.12041001419680451, 0.7224600851808272, 0.9021900666595286, 0.07845131014430683, 0.6118560147938764, 0.39143599948801766, 0.45667533273602057, 0.13047866649600587, 0.6610528352002611, 0.15023928072733206, 0.06009571229093283, 0.12019142458186566, 0.6438985296827523, 0.6438985296827523, 0.19613157216069224, 0.7191490979225382, 0.06537719072023075, 0.06537719072023075, 0.445332999598887, 0.445332999598887, 0.1020185703254413, 0.1020185703254413, 0.7141299922780892, 0.6319112534160406, 0.22978591033310566, 0.11489295516655283, 0.688279855512714, 0.5067409513452654, 0.38005571350894907, 0.12668523783631636, 0.5765343384630436, 0.2220468108591026, 0.6661404325773078, 0.2220468108591026, 0.6661404325773078, 0.445332999598887, 0.40975120480810756, 0.06829186746801792, 0.5463349397441434, 0.9185675732291778, 0.06123783821527852, 0.1877773064800285, 0.5633319194400854, 0.1877773064800285, 0.22340182735860314, 0.6702054820758094, 0.8927545712667896, 0.06867342855898381, 0.6558915848811908, 0.2623566339524763, 0.06558915848811908, 0.596377418221511, 0.05421612892922827, 0.3252967735753696, 0.3596781156704225, 0.3596781156704225, 0.3596781156704225, 0.1595371739994397, 0.1595371739994397, 0.6381486959977588, 0.5975172816659174, 0.2987586408329587, 0.8447602035418524, 0.01141567842624125, 0.11415678426241249, 0.03424703527872375, 0.3016576066320495, 0.603315213264099, 0.3016576066320495, 0.5264978845698557, 0.3509985897132371, 0.058499764952206185, 0.23801609495291684, 0.7140482848587505, 0.20897232894554899, 0.6617457083275717, 0.03482872149092483, 0.06965744298184966, 0.2816339793722146, 0.2816339793722146, 0.8974357323803251, 0.07478631103169377, 0.9022692383074491, 0.0902269238307449, 0.6080243069519226, 0.2702330253119656, 0.0675582563279914, 0.12758985864780717, 0.7655391518868431, 0.942759096708703, 0.058922443544293934, 0.3885040546447029, 0.11655121639341087, 0.038850405464470286, 0.4662048655736435, 0.23724548439170196, 0.6524250820771804, 0.05931137109792549, 0.05931137109792549, 0.445332999598887, 0.6658357890164361, 0.25609068808324464, 0.10243627523329786, 0.445332999598887, 0.2772949374965152, 0.5545898749930304, 0.1386474687482576, 0.1386474687482576, 0.445332999598887, 0.2220468108591026, 0.6661404325773078, 0.5539832376145105, 0.30776846534139474, 0.12310738613655789, 0.5365073866392811, 0.26825369331964055, 0.26825369331964055, 0.6118560147938764, 0.2220468108591026, 0.6661404325773078, 0.22807501087650778, 0.45615002175301556, 0.22807501087650778, 0.5760956990416793, 0.30725103948889565, 0.07681275987222391, 0.6510395761326846, 0.27126649005528525, 0.1085065960221141, 0.5823956145678971, 0.3882637430452648, 0.938086144432528, 0.058630384027033, 0.9472902998458405, 0.01334211689923719, 0.04002635069771157, 0.7669580032867561, 0.0541382119967122, 0.1082764239934244, 0.06316124732949757, 0.9600027629475727, 0.8344340803048828, 0.011430603839792915, 0.10287543455813623, 0.05715301919896457, 0.05679507439997642, 0.11359014879995284, 0.7951310415996699, 0.4955403287547388, 0.4404802922264345, 0.9072803106174883, 0.01890167313786434, 0.056705019413593016, 0.03780334627572868, 0.20778805070286216, 0.7618895192438279, 0.023087561189206907, 0.023087561189206907, 0.2454426506972038, 0.6749672894173104, 0.06136066267430095, 0.06136066267430095, 0.8488245051776001, 0.01632354817649231, 0.09794128905895387, 0.048970644529476935, 0.9136197166812126, 0.06300825632284225, 0.6504097956190134, 0.10269628351879158, 0.06846418901252771, 0.1711604725313193, 0.9308304103524969, 0.06648788645374978, 0.4637358997869598, 0.04637358997869598, 0.5101094897656558, 0.2474058879011776, 0.618514719752944, 0.0618514719752944, 0.0618514719752944, 0.9196620364194336, 0.055179722185166015, 0.01839324072838867, 0.45390375778068426, 0.22695187889034213, 0.22695187889034213, 0.22695187889034213, 0.7589336518618263, 0.7589336518618263, 0.7730505307094574, 0.08784665121698379, 0.10541598146038055, 0.03513866048679352, 0.21231542983760837, 0.7431040044316293, 0.9012509687268916, 0.09486852302388332, 0.2220468108591026, 0.6661404325773078, 0.16034959009953662, 0.8017479504976831, 0.16382522767886742, 0.16382522767886742, 0.6553009107154697, 0.1420698879342657, 0.7103494396713285, 0.16034959009953662, 0.8017479504976831, 0.8580714750106774, 0.015322704910904953, 0.12258163928723963, 0.8224090765651428, 0.03607057353355889, 0.09378349118725313, 0.04328468824027067, 0.36796808134820963, 0.07359361626964192, 0.5887489301571354, 0.243670268924694, 0.6091756723117351, 0.121835134462347, 0.121835134462347, 0.7000895967401908, 0.08937314000938605, 0.08937314000938605, 0.11916418667918141, 0.5911365543657259, 0.23645462174629034, 0.11822731087314517, 0.2220468108591026, 0.6661404325773078, 0.7136799604903283, 0.032439998204105834, 0.12975999281642334, 0.0973199946123175, 0.3755410990925501, 0.06259018318209168, 0.5007214654567335, 0.7954527923728565, 0.026515093079095216, 0.10606037231638087, 0.07954527923728565, 0.7060805029464091, 0.0818644061387141, 0.14326271074274965, 0.07163135537137483, 0.3596781156704225, 0.3596781156704225, 0.3596781156704225, 0.45682881126198743, 0.041529891932907945, 0.4983587031948954, 0.7979428992243136, 0.03627013178292334, 0.11787792829450086, 0.054405197674385015, 0.9442961605639733, 0.0419687182472877, 0.02098435912364385, 0.1377143192724072, 0.1377143192724072, 0.8262859156344433, 0.1705937172563803, 0.511781151769141, 0.1705937172563803, 0.9272289841406505, 0.042146772006393204, 0.042146772006393204, 0.6350961190640765, 0.22682004252288443, 0.09072801700915378, 0.04536400850457689, 0.9122097292446848, 0.06081398194964566, 0.5765343384630436, 0.21745514891781836, 0.5436378722945459, 0.21745514891781836, 0.10872757445890918, 0.1158954069808139, 0.8112678488656972, 0.735241540604495, 0.24508051353483168, 0.06127012838370792, 0.5887290050853698, 0.3924860033902466, 0.15475794576850188, 0.7737897288425094, 0.8932672285060121, 0.06160463644869049, 0.04106975763246033, 0.3596781156704225, 0.3596781156704225, 0.3596781156704225, 0.31028595783083357, 0.31028595783083357, 0.8243587066335083, 0.028924866899421347, 0.08677460069826404, 0.07231216724855337, 0.7535531591984326, 0.04036891924277317, 0.09419414489980407, 0.09419414489980407, 0.6502682629582728, 0.24746342143424005, 0.6599024571579735, 0.08248780714474668, 0.08248780714474668, 0.6571358596138774, 0.21904528653795916, 0.10952264326897958, 0.5609272990208961, 0.5609272990208961, 0.8175101484558583, 0.025952703125582805, 0.09083446093953981, 0.07785810937674842, 0.899288066707456, 0.028102752084608, 0.056205504169216, 0.4546178318529743, 0.4546178318529743], "Term": ["able", "able", "able", "aboard", "aboard", "aboard", "admiral", "admiral", "admiral", "aggressive", "alderaan", "alderaan", "alderaan", "alert", "alert", "alert", "alliance", "alliance", "ally", "ally", "amidala", "amidala", "among", "among", "anakin", "anakin", "anakin", "anakin", "anchorhead", "angry", "angry", "annie", "annie", "annie", "appointment", "appointment", "arena", "arena", "arena", "around", "around", "arrest", "arrest", "artoo", "artoo", "artoo", "assignment", "assignment", "asteroid", "asteroid", "attack", "attack", "attack", "attack", "audience", "audience", "awful", "awful", "back", "back", "back", "back", "bargain", "bargain", "bear", "best", "best", "biggs", "biggs", "biggs", "biggs", "blaster", "blaster", "blaster", "block", "block", "block", "boba", "bocce", "bounty", "bounty", "bounty", "bring", "bring", "bring", "buddy", "buddy", "buddy", "building", "building", "building", "called", "called", "carbon", "carbon", "cargo", "cargo", "chancellor", "chancellor", "chancellor", "check", "check", "check", "checked", "chewbacca", "chewbacca", "chewbacca", "chewie", "chewie", "chewie", "chewie", "clear", "clear", "clear", "clearance", "code", "code", "code", "come", "come", "come", "coming", "coming", "command", "command", "command", "command", "commander", "commander", "commander", "commission", "complete", "complete", "concentrate", "constitution", "constitution", "coruscant", "coruscant", "coruscant", "could", "could", "could", "could", "council", "council", "council", "crazy", "crazy", "crazy", "dantooine", "dantooine", "dantooine", "dark", "dark", "dark", "deactivated", "deactivated", "dear", "dear", "death", "death", "deflector", "deflector", "deflector", "deflector", "destiny", "destiny", "destiny", "destroy", "destroy", "destroy", "destroyer", "destroyer", "difficult", "difficult", "direction", "distracted", "distracted", "done", "done", "done", "drink", "droids", "droids", "droids", "droids", "easy", "easy", "easy", "eisley", "eisley", "eisley", "emperor", "emperor", "emperor", "energy", "energy", "engine", "engine", "enough", "enough", "enough", "entrance", "entrance", "entrance", "errand", "errand", "ever", "ever", "ever", "excellency", "exhaust", "extra", "falcon", "falcon", "falcon", "father", "father", "father", "father", "fear", "fear", "fear", "federation", "federation", "fett", "field", "field", "field", "find", "find", "find", "find", "fire", "fire", "fire", "fire", "firepower", "firepower", "fleet", "fleet", "fleet", "fluent", "fluent", "following", "following", "force", "force", "force", "force", "forever", "forever", "forgotten", "forgotten", "friend", "friend", "friend", "friend", "friendly", "fully", "fully", "galaxy", "galaxy", "galaxy", "garbage", "garbage", "garbage", "general", "general", "general", "generator", "generator", "generator", "geonosis", "geonosis", "geonosis", "geonosis", "give", "give", "going", "going", "going", "gold", "gold", "gold", "gold", "good", "good", "good", "good", "gotten", "gotten", "gotten", "grab", "grab", "grievous", "grievous", "grievous", "ground", "ground", "guard", "guard", "guard", "hang", "hang", "hang", "happened", "happened", "happened", "harvest", "harvest", "harvest", "help", "help", "help", "help", "hunter", "hunter", "hunter", "hurt", "hurt", "imperial", "imperial", "imperial", "imperial", "interpreter", "interpreter", "jabba", "jabba", "jabba", "jabba", "jawas", "jedi", "jedi", "jedi", "jedi", "jettisoned", "jump", "jump", "kenobi", "kenobi", "kenobi", "know", "know", "know", "know", "lady", "lady", "lando", "lando", "lando", "lando", "large", "last", "last", "last", "late", "late", "late", "late", "learned", "learned", "leave", "leave", "leave", "leia", "leia", "leia", "like", "like", "like", "like", "little", "little", "little", "little", "local", "local", "local", "look", "look", "look", "look", "lord", "lord", "lord", "lord", "lower", "lower", "luck", "luck", "luck", "luke", "luke", "luke", "luke", "make", "make", "make", "make", "malfunctioning", "masher", "master", "master", "master", "master", "mesa", "mesa", "might", "might", "might", "millennium", "millennium", "mistake", "mistake", "money", "money", "money", "moon", "moon", "moon", "moon", "move", "move", "move", "move", "much", "much", "much", "much", "must", "must", "must", "must", "naboo", "naboo", "naboo", "need", "need", "need", "need", "negative", "negative", "negative", "never", "never", "never", "never", "nice", "nice", "nothing", "nothing", "officer", "ohhh", "ohhh", "ohhh", "okay", "okay", "okay", "okay", "oops", "oops", "operational", "operational", "operational", "operational", "ought", "outrun", "owen", "owen", "owen", "padme", "padme", "padme", "palace", "palpatine", "palpatine", "palpatine", "parent", "party", "party", "passage", "passage", "passenger", "patience", "patience", "patience", "perhaps", "perhaps", "pick", "pick", "pick", "piece", "piece", "place", "place", "plan", "plan", "plan", "planet", "planet", "planet", "play", "play", "play", "pleasure", "pleasure", "pleasure", "plot", "plot", "power", "power", "power", "power", "precise", "precise", "precise", "pretty", "pretty", "pretty", "price", "price", "princess", "princess", "princess", "princess", "queen", "queen", "quick", "quick", "quite", "quite", "range", "range", "range", "reach", "reach", "real", "real", "really", "really", "really", "really", "rebel", "rebel", "rebel", "rebel", "religion", "republic", "republic", "republic", "restricted", "reward", "reward", "reward", "reward", "rich", "ridge", "ridge", "right", "right", "right", "room", "room", "room", "scan", "screen", "screen", "season", "season", "season", "senate", "senate", "senate", "senator", "senator", "senator", "separatist", "separatist", "shall", "shall", "shield", "shield", "shield", "ship", "ship", "ship", "ship", "shuttle", "side", "side", "side", "side", "sister", "sister", "sister", "sith", "sith", "skywalker", "skywalker", "skywalker", "skywalker", "solo", "solo", "solo", "solo", "somebody", "somebody", "somebody", "somebody", "something", "something", "something", "something", "soon", "soon", "sorry", "sorry", "sorry", "sorry", "speak", "speak", "stand", "stand", "stand", "standing", "standing", "standing", "standing", "star", "star", "star", "starship", "starship", "starship", "starship", "state", "state", "stay", "stay", "stay", "stay", "strike", "strike", "strong", "strong", "stuck", "stuck", "supposed", "supposed", "surface", "surface", "surface", "surprise", "surprise", "sweetheart", "sweetheart", "system", "system", "system", "take", "take", "take", "take", "talking", "talking", "talking", "target", "target", "target", "target", "tell", "tell", "tell", "tell", "temple", "temple", "temple", "terminal", "terminal", "thank", "thank", "thank", "thank", "thanks", "thanks", "thanks", "thing", "thing", "thing", "thing", "think", "think", "think", "think", "thirty", "thirty", "thirty", "three", "three", "three", "time", "time", "time", "time", "told", "told", "told", "took", "took", "took", "tractor", "tractor", "tractor", "training", "training", "training", "trouble", "trouble", "trouble", "trouble", "turn", "turn", "twilight", "uncle", "uncle", "uncle", "uncle", "unfortunate", "unfortunate", "unit", "unit", "unit", "upset", "upset", "using", "using", "vader", "vader", "vader", "vaporators", "vaporators", "vaporators", "viceroy", "viceroy", "wait", "wait", "wait", "wait", "want", "want", "want", "want", "watto", "wedge", "wedge", "wedge", "wedge", "well", "well", "well", "wesa", "wesa", "would", "would", "would", "would", "young", "young", "young", "yousa", "yousa"]}, "R": 30, "lambda.step": 0.01, "plot.opts": {"xlab": "PC1", "ylab": "PC2"}, "topic.order": [6, 2, 4, 5, 1, 3]};

function LDAvis_load_lib(url, callback){
  var s = document.createElement('script');
  s.src = url;
  s.async = true;
  s.onreadystatechange = s.onload = callback;
  s.onerror = function(){console.warn("failed to load library " + url);};
  document.getElementsByTagName("head")[0].appendChild(s);
}

if(typeof(LDAvis) !== "undefined"){
   // already loaded: just create the visualization
   !function(LDAvis){
       new LDAvis("#" + "ldavis_el973751402263694660643987149258", ldavis_el973751402263694660643987149258_data);
   }(LDAvis);
}else if(typeof define === "function" && define.amd){
   // require.js is available: use it to load d3/LDAvis
   require.config({paths: {d3: "https://d3js.org/d3.v5"}});
   require(["d3"], function(d3){
      window.d3 = d3;
      LDAvis_load_lib("https://cdn.jsdelivr.net/gh/bmabey/pyLDAvis@3.3.1/pyLDAvis/js/ldavis.v3.0.0.js", function(){
        new LDAvis("#" + "ldavis_el973751402263694660643987149258", ldavis_el973751402263694660643987149258_data);
      });
    });
}else{
    // require.js not available: dynamically load d3 & LDAvis
    LDAvis_load_lib("https://d3js.org/d3.v5.js", function(){
         LDAvis_load_lib("https://cdn.jsdelivr.net/gh/bmabey/pyLDAvis@3.3.1/pyLDAvis/js/ldavis.v3.0.0.js", function(){
                 new LDAvis("#" + "ldavis_el973751402263694660643987149258", ldavis_el973751402263694660643987149258_data);
            })
         });
}
</script></div></div>
</div>
<p>Here topic 5 (in the plot) corrosponds to topic 0 (in our model print), and we see that this topic is neglegeble in size. Topic 1 (plot) corrosponds to topic 5 (print output) and given it’s large size and the fact that it contains words like (Luke, Vader, Emporer, Leia, Force etc.) it most likely describes the entire original trilogy (movies 4-6).</p>
<p>The fact that LDA does not capture all 6 movies and just the generel themes is likely due to two reasons.</p>
<ol class="simple">
<li><p>It’s an unsupervised model and thus the result will differ everytime, which is why we set the random_state. This also means it’s probably possible to create 6 clearly different topics for the 6 movies, but statistically it will be unlikely because</p></li>
<li><p>the movies are very similar. They are all from the same cinematic universe and movies 4 and 6 had the same plot of destroying the death star. Additionaly, the main characters are the same in the sequal, and in the prequals.</p></li>
</ol>
<p>This is why we’ll also look at choosing 2 hidden topics instead (one for each trilogy):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">gensim</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">LdaModel</span><span class="p">(</span><span class="n">corpus</span> <span class="o">=</span> <span class="n">common_corpus</span><span class="p">,</span> <span class="n">id2word</span> <span class="o">=</span> <span class="n">id2word</span><span class="p">,</span> <span class="n">num_topics</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">chunksize</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">random_state</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span> <span class="c1">#building model</span>
<span class="n">model</span><span class="o">.</span><span class="n">show_topics</span><span class="p">(</span><span class="n">num_topics</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">num_words</span> <span class="o">=</span> <span class="mi">8</span><span class="p">)</span> <span class="c1"># printing out the words for the topics</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(0,
  &#39;0.012*&quot;luke&quot; + 0.009*&quot;good&quot; + 0.008*&quot;take&quot; + 0.007*&quot;must&quot; + 0.007*&quot;time&quot; + 0.007*&quot;vader&quot; + 0.007*&quot;back&quot; + 0.006*&quot;could&quot;&#39;),
 (1,
  &#39;0.012*&quot;chewie&quot; + 0.008*&quot;look&quot; + 0.007*&quot;luke&quot; + 0.006*&quot;father&quot; + 0.006*&quot;ship&quot; + 0.006*&quot;jabba&quot; + 0.006*&quot;think&quot; + 0.006*&quot;take&quot;&#39;)]
</pre></div>
</div>
</div>
</div>
<p>Luke, father, and Chewie are from the sequals, thus the hidden topic modeling is still not capturing prequals/sequals.</p>
<p>Finally, we’ll do a hidden topic analyses for each movie sepperately:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">for</span> <span class="n">movie</span> <span class="ow">in</span> <span class="n">list_of_scripts</span><span class="p">:</span>
    <span class="n">id2word</span> <span class="o">=</span> <span class="n">corpora</span><span class="o">.</span><span class="n">Dictionary</span><span class="p">([</span><span class="n">movie</span><span class="p">])</span> <span class="c1"># creating dictionary</span>

    <span class="n">common_corpus</span> <span class="o">=</span> <span class="p">[</span><span class="n">id2word</span><span class="o">.</span><span class="n">doc2bow</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="p">[</span><span class="n">movie</span><span class="p">]]</span> <span class="c1"># maping to index</span>

    <span class="n">model</span> <span class="o">=</span> <span class="n">gensim</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">LdaModel</span><span class="p">(</span><span class="n">corpus</span> <span class="o">=</span> <span class="n">common_corpus</span><span class="p">,</span> <span class="n">id2word</span> <span class="o">=</span> <span class="n">id2word</span><span class="p">,</span> <span class="n">num_topics</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">#building model</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Movie: </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">show_topics</span><span class="p">(</span><span class="n">num_topics</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">num_words</span> <span class="o">=</span> <span class="mi">6</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> <span class="c1"># printing out the words for the topics</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Movie: 1
[(0, &#39;0.009*&quot;think&quot; + 0.008*&quot;master&quot; + 0.007*&quot;take&quot; + 0.007*&quot;know&quot; + 0.007*&quot;mesa&quot; + 0.007*&quot;queen&quot;&#39;)]

Movie: 2
[(0, &#39;0.016*&quot;master&quot; + 0.016*&quot;geonosis&quot; + 0.015*&quot;jedi&quot; + 0.011*&quot;night&quot; + 0.010*&quot;anakin&quot; + 0.009*&quot;naboo&quot;&#39;)]

Movie: 3
[(0, &#39;0.019*&quot;jedi&quot; + 0.016*&quot;anakin&quot; + 0.012*&quot;master&quot; + 0.011*&quot;chancellor&quot; + 0.010*&quot;know&quot; + 0.008*&quot;right&quot;&#39;)]

Movie: 4
[(0, &#39;0.012*&quot;luke&quot; + 0.008*&quot;ship&quot; + 0.007*&quot;think&quot; + 0.007*&quot;look&quot; + 0.006*&quot;back&quot; + 0.006*&quot;time&quot;&#39;)]

Movie: 5
[(0, &#39;0.008*&quot;good&quot; + 0.008*&quot;luke&quot; + 0.007*&quot;lord&quot; + 0.007*&quot;ship&quot; + 0.007*&quot;chewie&quot; + 0.007*&quot;vader&quot;&#39;)]

Movie: 6
[(0, &#39;0.012*&quot;luke&quot; + 0.009*&quot;father&quot; + 0.009*&quot;chewie&quot; + 0.008*&quot;good&quot; + 0.007*&quot;take&quot; + 0.006*&quot;back&quot;&#39;)]
</pre></div>
</div>
</div>
</div>
<p>Unsuprisngly the topic modelling better captures the plot of the movies. Geonosis a planet important to the second movie, and ‘Mesa’ Jar-Jar’s catchphrase from the first movie. However, we still se the topics for movies 1 and 5 are undescriptive given their low word score.</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="Page_NLP.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Word clouds</p>
        </div>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Orfeas, Harald, Mia<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>